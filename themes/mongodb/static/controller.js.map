{"version":3,"file":"controller.js","sources":["../src/js/util.js","../src/js/componentAccordion.js","../src/js/componentCloseOpen.js","../src/js/componentCodeBlockFix.js","../src/js/componentCopyButtons.js","../src/js/componentFastLoad.js","../src/node_modules/svelte/shared.js","../src/node_modules/rigning/src/components/BinaryQuestion.html","../src/node_modules/rigning/src/components/FreeformQuestion.html","../src/node_modules/rigning/src/components/MainWidget.html","../src/node_modules/rigning/src/lib.js","../src/js/componentFeedback.js","../src/js/componentTabs.js","../src/js/componentGuides.js","../src/js/componentLightbox.js","../src/js/componentOpenAPI.js","../src/js/componentPillStrip.js","../src/js/componentSidebar.js","../src/js/componentThirdParty.js","../src/js/componentToggleController.js","../src/js/componentUriwriter.js","../src/js/componentVersionSelector.js","../src/js/controller.js"],"sourcesContent":["export function isLeafNode($node) {\n    return !$node.siblings('ul:not(.simple)').length;\n}\n\nexport function toArray(arrayLike) {\n    const result = [];\n    for (let i = 0; i < arrayLike.length; i += 1) {\n        result.push(arrayLike[i]);\n    }\n\n    return result;\n}\n\n/* Checks a whitelist for non-leaf nodes that should trigger a full page reload */\nexport function requiresPageload($node) {\n    const docsExcludedNav = window.docsExcludedNav;\n\n    if (!docsExcludedNav || !docsExcludedNav.length) {\n        return false;\n    }\n\n    for (let i = 0; i < docsExcludedNav.length; i += 1) {\n        if ($node[0].href.indexOf(docsExcludedNav[i]) !== -1) {\n            return true;\n        }\n    }\n    return false;\n}\n\nexport function throttle(func, wait) {\n    let args = null;\n    let result = null;\n    let timeout = null;\n    let previous = 0;\n\n    function later() {\n        previous = Date.now();\n        timeout = null;\n        result = func.apply(...args);\n        if (!timeout) {\n            args = null;\n        }\n    }\n\n    return function(...newArgs) {\n        const now = Date.now();\n        const remaining = wait - (now - previous);\n        args = newArgs;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                window.clearTimeout(timeout);\n                timeout = null;\n            }\n\n            previous = now;\n            result = func(...args);\n            if (!timeout) {\n                args = null;\n            }\n        } else if (!timeout) {\n            timeout = window.setTimeout(later, remaining);\n        }\n\n        return result;\n    };\n}\n\nexport function reportAnalytics(eventName, data) {\n    try {\n        window.analytics.track(eventName, data);\n    } catch (err) {\n        console.error(`Error reporting analytics: ${eventName}`, err);\n    }\n}\n\nexport class Dispatcher {\n    constructor() {\n        this.listeners = [];\n    }\n\n    listen(handler) {\n        this.listeners.push(handler);\n    }\n\n    dispatch(ctx) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            this.listeners[i](ctx);\n        }\n    }\n}\n","import {reportAnalytics} from './util';\n\nconst COLLAPSED_PROPERTY = 'accordion--collapsed';\n\n/**\n * Expands and collapses the accordion. Changes the label for the\n * action, i.e., \"Expand\" or \"Collapse\"\n * @param {object} element The accordion element.\n * @returns {void}\n */\nfunction accordionShowHide(element) {\n    element.classList.toggle(COLLAPSED_PROPERTY);\n\n    const control = element.querySelector('.accordion__action');\n    control.innerHTML = (control.innerHTML === 'Expand') ? 'Collapse' : 'Expand';\n\n    const title = element.querySelector('.accordion__title').innerText;\n    reportAnalytics('Accordion Toggled', {\n        'title': title,\n        'status': element.classList.contains(COLLAPSED_PROPERTY) ? 'collapsed' : 'expanded'\n    });\n}\n\nexport function setup() {\n    // Get accordions and assign listeners to handle expand/collapse\n    const accordionElements = document.getElementsByClassName('accordion');\n    for (let i = 0; i < accordionElements.length; i += 1) {\n        const element = accordionElements[i];\n        const button = element.querySelector('.accordion__button');\n\n        button.addEventListener('click', accordionShowHide.bind(this, element));\n    }\n}\n","export function setup() {\n    const showNavButton = document.getElementById('showNav');\n    if (showNavButton) {\n        showNavButton.onclick = () => {\n            document.getElementById('sphinxsidebar').style.display = 'block';\n            document.getElementById('left-column').style.display = 'flex';\n            document.getElementById('showNav').style.display = 'none';\n        };\n    }\n\n    const closeNavButton = document.getElementById('closeNav');\n    if (closeNavButton) {\n        closeNavButton.onclick = () => {\n            document.getElementById('showNav').style.display = 'flex';\n            document.getElementById('left-column').style.display = 'none';\n        };\n    }\n}\n","/*\ncode-blocks with the :linenos: options render an html table, unlike\nregular code-blocks. This component moves the button row into a new row\nof the html table to fix the visual alignment.\n\nhttps://jira.mongodb.org/browse/DOCSP-2064\n*/\n\nfunction isLineNumberBlock(block) {\n    return Boolean(block.getElementsByClassName('linenos').length);\n}\n\nfunction isCaptionBlock(block) {\n    return Boolean(block.getElementsByClassName('caption-text').length);\n}\n\nfunction hasButtonRow(block) {\n    return Boolean(block.getElementsByClassName('button-row')[0]);\n}\n\nfunction moveButtonRowToTable(block) {\n    // Select existing elements\n    const buttonRow = block.getElementsByClassName('button-row')[0];\n    const tableBody = block.getElementsByClassName('highlighttable')[0].childNodes[0];\n\n    // Create new table elements\n    const tableButtonRow = document.createElement('tr');\n    const linenosSpacer = document.createElement('td');\n    const buttonRowDestination = document.createElement('td');\n\n    // Add class for { table-layout: fixed; } styling\n    linenosSpacer.className = 'linenos-button-row-spacer';\n\n    // Manipulate the DOM\n    tableBody.insertBefore(tableButtonRow, tableBody.firstChild);\n    tableButtonRow.appendChild(linenosSpacer);\n    tableButtonRow.appendChild(buttonRowDestination);\n    buttonRowDestination.appendChild(buttonRow);\n}\n\nfunction moveButtonRowBelowCaption(block) {\n    // Select existing elements\n    const buttonRow = block.getElementsByClassName('button-row')[0];\n    const caption = block.getElementsByClassName('code-block-caption')[0];\n\n    console.log('MOVING BELOW CAPTION');\n\n    // Manipulate the DOM\n    caption.parentNode.insertBefore(buttonRow, caption.nextSibling);\n}\n\nfunction fixCodeBlock(block) {\n    if (isLineNumberBlock(block)) {\n        moveButtonRowToTable(block);\n    }\n    else if (isCaptionBlock(block)) {\n        moveButtonRowBelowCaption(block);\n    }\n}\n\nexport function setup() {\n    const codeblocks = document.getElementsByClassName('button-code-block');\n    for (const codeblock of codeblocks) {\n        if (hasButtonRow(codeblock)) {\n            fixCodeBlock(codeblock);\n        }\n    }\n}\n","import {reportAnalytics, toArray} from './util';\n\nconst TOOLTIP_STATE_ACTIVE = 'code-button__tooltip--active';\nconst TOOLTIP_STATE_INACTIVE = 'code-button__tooltip--inactive';\n\nfunction cancelAndWait(f, timeoutID, ms) {\n    if (timeoutID >= 0) {\n        window.clearTimeout(timeoutID);\n    }\n\n    return window.setTimeout(f, ms);\n}\n\nfunction isCopyableCodeBlock(block) {\n    return Boolean(block.getElementsByClassName('copyable-code-block')[0]);\n}\n\nexport function setup() {\n    const buttonCodeBlocks = document.getElementsByClassName('button-code-block');\n    const copyableBlocks = toArray(buttonCodeBlocks).filter(isCopyableCodeBlock);\n\n    for (const block of copyableBlocks) {\n        const highlightElement = block.getElementsByClassName('highlight')[0];\n        if (!highlightElement) {\n            return;\n        }\n\n        const buttonRow = block.getElementsByClassName('button-row')[0];\n        const copyButton = buttonRow.getElementsByClassName('code-button--copy')[0];\n        if (!copyButton) {\n            return;\n        }\n\n        const popupElement = document.createElement('div');\n        popupElement.innerText = 'copied';\n        popupElement.classList.add('code-button__tooltip');\n        popupElement.classList.add(TOOLTIP_STATE_INACTIVE);\n        let closePopupTimer = -1;\n\n        copyButton.appendChild(popupElement);\n        copyButton.addEventListener('click', () => {\n            const tempElement = document.createElement('textarea');\n            tempElement.style.position = 'fixed';\n            document.body.appendChild(tempElement);\n            const text = highlightElement.innerText.trim();\n            tempElement.value = text;\n            tempElement.select();\n\n            try {\n                const successful = document.execCommand('copy');\n                if (!successful) {\n                    throw new Error('Failed to copy');\n                }\n\n                popupElement.classList.replace(TOOLTIP_STATE_INACTIVE, TOOLTIP_STATE_ACTIVE);\n                closePopupTimer = cancelAndWait(() => {\n                    popupElement.classList.replace(TOOLTIP_STATE_ACTIVE, TOOLTIP_STATE_INACTIVE);\n                }, closePopupTimer, 1500);\n            } catch (err) {\n                console.error(err);\n            }\n\n            document.body.removeChild(tempElement);\n\n            reportAnalytics('Codeblock Copied', {'code': text});\n        });\n    }\n}\n","import * as util from './util';\n\n/* Wrapper around XMLHttpRequest to make it more convenient\n * Calls options.success(response, url), providing the response text and\n *         the canonical URL after redirects.\n * Calls options.error() on error.\n * jQuery's wrapper does not supply XMLHttpRequest.responseURL, making\n * this rewrite necessary. */\nfunction xhrGet(url, options) {\n    const xhr = new XMLHttpRequest();\n\n    xhr.onload = function() {\n        if (xhr.status >= 200 && xhr.status < 400) {\n            options.success(xhr.responseText, xhr.responseURL);\n            options.complete();\n        } else {\n            options.error();\n            options.complete();\n        }\n    };\n\n    xhr.onerror = function() {\n        options.error();\n        options.complete();\n    };\n\n    xhr.open('GET', url, true);\n    try {\n        xhr.send();\n    } catch (err) {\n        options.error();\n        options.complete();\n    }\n}\n\n// If the browser is sufficiently modern, make navbar links load only\n// content pieces to avoid a full page load.\nexport function setup(fastNav) {\n    if (window.history === undefined ||\n        document.querySelectorAll === undefined ||\n        document.body.classList === undefined ||\n        (new XMLHttpRequest()).responseURL === undefined) {\n        return false;\n    }\n\n    let navRootElement = document.querySelector('.sphinxsidebarwrapper');\n    let bodyElement = document.querySelector('.body');\n    let curLoading = {};\n\n    // Set up initial state so we can return to our initial landing page.\n    window.history.replaceState({'href': window.location.href},\n        document.querySelector('title').textContent,\n        window.location.href);\n\n    // Stop loading the currently-in-progress page.\n    function abortLoading() {\n        if (curLoading.timeoutID !== undefined) {\n            window.clearTimeout(curLoading.timeoutID);\n        }\n\n        if (curLoading.xhr !== undefined) {\n            curLoading.xhr.abort();\n        }\n\n        curLoading = {};\n    }\n\n    // Load the specified URL.\n    function loadPage(href, createHistory) {\n        if (href === undefined) {\n            console.error('Going to undefined path');\n        }\n\n        abortLoading();\n        bodyElement.classList.add('loading');\n\n        // If something goes wrong while loading, we don't want to leave\n        // people without a paddle. If we can't load after a long period of\n        // time, bring back the original content.\n        curLoading.timeoutID = window.setTimeout(() => {\n            bodyElement.classList.remove('loading');\n            curLoading.timeoutID = -1;\n        }, 10000);\n\n        const startTime = new Date();\n        curLoading.xhr = xhrGet(href, {\n            'complete': () => {\n                abortLoading();\n            },\n            'error': (error) => {\n            // Some browsers consider any file://-type request to be cross-origin.\n            // Upon any kind of error, fall back to classic behavior\n                console.error(`Failed to load ${href}`);\n                window.location = href;\n            },\n            'success': (pageText, trueUrl) => {\n                const enlapsedMs = (new Date()) - startTime;\n                bodyElement.classList.remove('loading');\n\n                // Change URL before loading the DOM to properly resolve URLs\n                if (createHistory) {\n                    window.history.pushState({'href': trueUrl}, '', trueUrl);\n                }\n\n                const page = document.createElement('html');\n                page.innerHTML = pageText;\n                const title = page.querySelector('title').textContent;\n                const newBody = page.querySelector('.body');\n                const newNav = page.querySelector('.sphinxsidebarwrapper');\n\n                // Fade in ONLY if we had enough time to start fading out.\n                if (enlapsedMs > (250 / 4)) {\n                    newBody.classList.add('loading');\n                }\n\n                // Replace the DOM elements\n                bodyElement.parentElement.replaceChild(newBody, bodyElement);\n                bodyElement = newBody;\n                navRootElement.parentElement.replaceChild(newNav, navRootElement);\n                navRootElement = newNav;\n                document.title = title;\n\n                // Update dynamic page features\n                fastNav.update();\n\n                if (window.history.onnavigate) {\n                    window.history.onnavigate();\n                }\n\n                // Prime the new DOM so that we can set up our fade-in\n                // animation and scroll the new contents to the top.\n                window.setTimeout(() => {\n                    bodyElement.classList.remove('loading');\n\n                    // Scroll to the top of the page only if this is a new history entry.\n                    if (createHistory) {\n                        window.scroll(0, 0);\n                    }\n                }, 1);\n            }\n        });\n    }\n\n    // Set up fastnav links\n    const nodes = document.querySelectorAll('.sphinxsidebarwrapper > ul a.reference.internal');\n    function handleClickFunction(ev) {\n        // Ignore anything but vanilla click events, so that people can\n        // still use special browser behaviors like open in new tab.\n        if (!(ev.button !== 0 || ev.shiftKey || ev.altKey || ev.metaKey || ev.ctrlKey)) {\n            ev.preventDefault();\n            loadPage(ev.currentTarget.href, true);\n        }\n    }\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (!util.isLeafNode($(node)) && !util.requiresPageload($(node))) { continue; }\n\n        node.addEventListener('click', handleClickFunction);\n    }\n\n    window.onpopstate = function(ev) {\n        if (ev.state === null) { return; }\n        loadPage(ev.state.href, false);\n    };\n\n\n    return true;\n}\n","function noop() {}\n\nfunction assign(tar, src) {\n\tfor (var k in src) tar[k] = src[k];\n\treturn tar;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d();\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setAttributes(node, attributes) {\n\tfor (var key in attributes) {\n\t\tif (key in node) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tif (attributes[key] === undefined) removeAttribute(node, key);\n\t\t\telse setAttribute(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\nfunction removeAttribute(node, attribute) {\n\tnode.removeAttribute(attribute);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction selectOption(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction selectOptions(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction selectValue(select) {\n\tvar selectedOption = select.querySelector(':checked') || select.options[0];\n\treturn selectedOption && selectedOption.__value;\n}\n\nfunction selectMultipleValue(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), function(option) {\n\t\treturn option.__value;\n\t});\n}\n\nfunction destroyBlock(block, lookup) {\n\tblock.u();\n\tblock.d();\n\tlookup[block.key] = null;\n}\n\nfunction outroAndDestroyBlock(block, lookup) {\n\tblock.o(function() {\n\t\tdestroyBlock(block, lookup);\n\t});\n}\n\nfunction updateKeyedEach(old_blocks, component, changed, key_prop, dynamic, list, lookup, node, has_outro, create_each_block, intro_method, next, get_context) {\n\tvar o = old_blocks.length;\n\tvar n = list.length;\n\n\tvar i = o;\n\tvar old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\n\tvar new_blocks = [];\n\tvar new_lookup = {};\n\tvar deltas = {};\n\n\tvar i = n;\n\twhile (i--) {\n\t\tvar key = list[i][key_prop];\n\t\tvar block = lookup[key];\n\n\t\tif (!block) {\n\t\t\tblock = create_each_block(component, key, get_context(i));\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\tblock.p(changed, get_context(i));\n\t\t}\n\n\t\tnew_blocks[i] = new_lookup[key] = block;\n\n\t\tif (key in old_indexes) deltas[key] = Math.abs(i - old_indexes[key]);\n\t}\n\n\tvar will_move = {};\n\tvar did_move = {};\n\n\tvar destroy = has_outro ? outroAndDestroyBlock : destroyBlock;\n\n\tfunction insert(block) {\n\t\tblock[intro_method](node, next);\n\t\tlookup[block.key] = block;\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\n\twhile (o && n) {\n\t\tvar new_block = new_blocks[n - 1];\n\t\tvar old_block = old_blocks[o - 1];\n\t\tvar new_key = new_block.key;\n\t\tvar old_key = old_block.key;\n\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t}\n\n\t\telse if (!new_lookup[old_key]) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t}\n\n\t\telse if (!lookup[new_key] || will_move[new_key]) {\n\t\t\tinsert(new_block);\n\t\t}\n\n\t\telse if (did_move[old_key]) {\n\t\t\to--;\n\n\t\t} else if (deltas[new_key] > deltas[old_key]) {\n\t\t\tdid_move[new_key] = true;\n\t\t\tinsert(new_block);\n\n\t\t} else {\n\t\t\twill_move[old_key] = true;\n\t\t\to--;\n\t\t}\n\t}\n\n\twhile (o--) {\n\t\tvar old_block = old_blocks[o];\n\t\tif (!new_lookup[old_block.key]) destroy(old_block, lookup);\n\t}\n\n\twhile (n) insert(new_blocks[n - 1]);\n\n\treturn new_blocks;\n}\n\nfunction getSpreadUpdate(levels, updates) {\n\tvar update = {};\n\n\tvar to_null_out = {};\n\tvar accounted_for = {};\n\n\tvar i = levels.length;\n\twhile (i--) {\n\t\tvar o = levels[i];\n\t\tvar n = updates[i];\n\n\t\tif (n) {\n\t\t\tfor (var key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\n\t\t\tfor (var key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (var key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\n\treturn update;\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule(\n\ta,\n\tb,\n\tdelta,\n\tduration,\n\tease,\n\tfn\n) {\n\tvar keyframes = '{\\n';\n\n\tfor (var p = 0; p <= 1; p += 16.666 / duration) {\n\t\tvar t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + '%{' + fn(t) + '}\\n';\n\t}\n\n\treturn keyframes + '100% {' + fn(b) + '}\\n}';\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tvar hash = 5381;\n\tvar i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro, outgroup) {\n\tvar obj = fn(node, params);\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\tvar cssText;\n\n\t// TODO share <style> tag between all transitions?\n\tif (obj.css && !transitionManager.stylesheet) {\n\t\tvar style = createElement('style');\n\t\tdocument.head.appendChild(style);\n\t\ttransitionManager.stylesheet = style.sheet;\n\t}\n\n\tif (intro) {\n\t\tif (obj.css && obj.delay) {\n\t\t\tcssText = node.style.cssText;\n\t\t\tnode.style.cssText += obj.css(0);\n\t\t}\n\n\t\tif (obj.tick) obj.tick(0);\n\t}\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function(intro, callback) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\t\tstart: function(program) {\n\t\t\tcomponent.fire(program.intro ? 'intro.start' : 'outro.start', { node: node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tprogram.rule = generateRule(\n\t\t\t\t\tprogram.a,\n\t\t\t\t\tprogram.b,\n\t\t\t\t\tprogram.delta,\n\t\t\t\t\tprogram.duration,\n\t\t\t\t\tease,\n\t\t\t\t\tobj.css\n\t\t\t\t);\n\n\t\t\t\ttransitionManager.addRule(program.rule, program.name = '__svelte_' + hash(program.rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(function(anim) {\n\t\t\t\t\t\t// when introing, discard old animations if there are any\n\t\t\t\t\t\treturn anim && (program.delta < 0 || !/__svelte/.test(anim));\n\t\t\t\t\t})\n\t\t\t\t\t.concat(program.name + ' ' + program.duration + 'ms linear 1 forwards')\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function(now) {\n\t\t\tvar program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t},\n\t\tdone: function() {\n\t\t\tvar program = this.program;\n\t\t\tthis.t = program.b;\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\tprogram.callback();\n\t\t\tprogram = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function() {\n\t\t\tif (obj.tick) obj.tick(1);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\n\tadd: function(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule: function(rule, name) {\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule('@keyframes ' + name + ' ' + rule, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext: function() {\n\t\tthis.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tvar transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tvar i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule: function(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(function(anim) {\n\t\t\t\treturn anim.indexOf(name) === -1;\n\t\t\t})\n\t\t\t.join(', ');\n\t}\n};\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop;\n\n\tif (detach !== false) this._fragment.u();\n\tthis._fragment.d();\n\tthis._fragment = this._state = null;\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction _differs(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction _differsImmutable(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\tvar handler = handlers[i];\n\n\t\tif (!handler.__calling) {\n\t\t\thandler.__calling = true;\n\t\t\thandler.call(this, data);\n\t\t\thandler.__calling = false;\n\t\t}\n\t}\n}\n\nfunction getDev(key) {\n\tif (key) console.warn(\"`let x = component.get('x')` is deprecated. Use `let { x } = component.get()` instead\");\n\treturn get.call(this, key);\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction init(component, options) {\n\tcomponent._handlers = blankObject();\n\tcomponent._bind = options._bind;\n\n\tcomponent.options = options;\n\tcomponent.root = options.root || component;\n\tcomponent.store = component.root.store || options.store;\n}\n\nfunction observe(key, callback, options) {\n\tvar fn = callback.bind(this);\n\n\tif (!options || options.init !== false) {\n\t\tfn(this.get()[key], undefined);\n\t}\n\n\treturn this.on(options && options.defer ? 'update' : 'state', function(event) {\n\t\tif (event.changed[key]) fn(event.current[key], event.previous && event.previous[key]);\n\t});\n}\n\nfunction observeDev(key, callback, options) {\n\tconsole.warn(\"this.observe(key, (newValue, oldValue) => {...}) is deprecated. Use\\n\\n  // runs before DOM updates\\n  this.on('state', ({ changed, current, previous }) => {...});\\n\\n  // runs after DOM updates\\n  this.on('update', ...);\\n\\n...or add the observe method from the svelte-extras package\");\n\n\tvar c = (key = '' + key).search(/[.[]/);\n\tif (c > -1) {\n\t\tvar message =\n\t\t\t'The first argument to component.observe(...) must be the name of a top-level property';\n\t\tif (c > 0)\n\t\t\tmessage += \", i.e. '\" + key.slice(0, c) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error(message);\n\t}\n\n\treturn observe.call(this, key, callback, options);\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction onDev(eventName, handler) {\n\tif (eventName === 'teardown') {\n\t\tconsole.warn(\n\t\t\t\"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\"\n\t\t);\n\t\treturn this.on('destroy', handler);\n\t}\n\n\treturn on.call(this, eventName, handler);\n}\n\nfunction run(fn) {\n\tfn();\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this.root._lock) return;\n\tthis.root._lock = true;\n\tcallAll(this.root._beforecreate);\n\tcallAll(this.root._oncreate);\n\tcallAll(this.root._aftercreate);\n\tthis.root._lock = false;\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (this._differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign(assign({}, oldState), newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\n\tif (this._fragment) {\n\t\tthis.fire(\"state\", { changed: changed, current: this._state, previous: oldState });\n\t\tthis._fragment.p(changed, this._state);\n\t\tthis.fire(\"update\", { changed: changed, current: this._state, previous: oldState });\n\t}\n}\n\nfunction setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + '.set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\tset.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.shift()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment[this._fragment.i ? 'i' : 'm'](target, anchor || null);\n}\n\nfunction _unmount() {\n\tif (this._fragment) this._fragment.u();\n}\n\nfunction isPromise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nvar PENDING = {};\nvar SUCCESS = {};\nvar FAILURE = {};\n\nfunction removeFromStore() {\n\tthis.store._remove(this);\n}\n\nvar proto = {\n\tdestroy: destroy,\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\tteardown: destroy,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount,\n\t_differs: _differs\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget: getDev,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: setDev,\n\tteardown: destroyDev,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount,\n\t_differs: _differs\n};\n\nexport { blankObject, destroy, destroyDev, _differs, _differsImmutable, fire, getDev, get, init, observe, observeDev, on, onDev, run, set, _set, setDev, callAll, _mount, _unmount, isPromise, PENDING, SUCCESS, FAILURE, removeFromStore, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setAttributes, removeAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setInputType, setStyle, selectOption, selectOptions, selectValue, selectMultipleValue, destroyBlock, outroAndDestroyBlock, updateKeyedEach, getSpreadUpdate, linear, generateRule, hash, wrapTransition, transitionManager, noop, assign };\n","<div>{{{ caption }}}</div>\n<div>\n    <span class=\"switch fa fa-thumbs-up good {{ upvoteSelected }}\" on:click=\"change(true)\"></span>\n    <span class=\"switch fa fa-thumbs-down bad {{ downvoteSelected }}\" on:click=\"change(false)\"></span>\n</div>\n\n<script>\nexport default {\n    data: function () {\n        return {\n            name: '',\n            caption: '',\n            answer: null,\n        }\n    },\n\n    methods: {\n        change: function(value) {\n            this.set({answer: value})\n            this.fire('change', value)\n        }\n    },\n\n    computed: {\n        upvoteSelected: (answer) => answer === true ? 'selected' : '',\n        downvoteSelected: (answer) => answer === false ? 'selected' : ''\n    }\n}\n</script>\n","<textarea placeholder=\"{{ caption }}\" on:input=\"fire('change', answer)\" bind:value=\"answer\"></textarea>\n\n<script>\nexport default {\n    data: function () {\n        return {\n            name: '',\n            caption: '',\n            answer: ''\n        }\n    },\n\n    methods: {\n        change: function() {\n            this.fire('change', this.get('answer'))\n        }\n    },\n}\n</script>\n","<div class=\"{{ delugeClass }}\">\n    <div class=\"{{ delugeHeaderClass }}\" on:click='toggle()'>\n    {{ #if state === 'Initial' }}\n        <span class=\"fa fa-comments deluge-comment-icon\"></span>\n    {{ /if }}\n\n        <span class=\"deluge-helpful\">Was this page helpful?</span>\n\n    {{ #if state !== 'Initial' }}\n        <span class=\"fa fa-angle-down deluge-close-icon\"></span>\n    {{ /if }}\n    </div>\n\n    <div class=\"{{ delugeBodyClass }}\">\n    {{ #if state === 'Voted-Up' || state === 'Voted-Down' }}\n        <p>Thank you for your feedback!</p>\n    {{ /if }}\n\n    {{ #if state === 'Voted-Down' }}\n        <p>If this page contains an error, you may <a class=\"deluge-fix-button jira-link jirafeedback\" target=\"_blank\" title=\"Report a problem with {{ pagename }} on Jira\" on:click=\"showCollectorDialog()\">report the problem on Jira.</a></p>\n    {{ elseif state == 'Pending '}}\n        <p>Submitting feedback...</p>\n    {{ elseif state === 'NotVoted' }}\n        <a id=\"rate-up\" on:click=\"rate(true)\" class=\"deluge-vote-button\">Yes</a>\n        <a id=\"rate-down\" on:click=\"rate(false)\" class=\"deluge-vote-button\">No</a>\n    {{ elseif typeof state === 'boolean' }}\n        <div class=\"deluge-questions\">\n            <ul ref>\n            {{ #if state === false }}\n                <li>We're sorry! Please help us improve this page.</li>\n            {{ /if }}\n            {{ #each questions as question }}\n                <li>\n                {{ #if question.type === 'binary' }}\n                    <BinaryQuestion name=\"{{ question.name }}\" caption=\"{{ question.caption }}\" on:change=\"update(question.name, event)\" />\n                {{ elseif question.type === 'freeform' }}\n                    <FreeformQuestion name=\"{{ question.name }}\" caption=\"{{ question.caption }}\" on:change=\"update(question.name, event)\" />\n                {{ /if }}\n                </li>\n            {{ /each }}\n            </ul>\n\n            <div class=\"deluge-button-group\">\n                <button on:click=\"toggle()\">Cancel</button>\n                <button class=\"primary\" on:click=\"submit()\">Submit</button>\n            </div>\n        </div>\n    {{ /if }}\n    </div>\n</div>\n\n<script>\nimport BinaryQuestion from './BinaryQuestion.html';\nimport FreeformQuestion from './FreeformQuestion.html';\n\nfunction loadJira(jiraurl) {\n    const scriptElement = document.createElement('script')\n    scriptElement.type = 'application/javascript'\n    scriptElement.src = jiraurl\n    document.body.appendChild(scriptElement)\n}\n\nexport default {\n    data: function () {\n        return {\n            project: '',\n            pagename: '',\n            state: 'Initial',\n            jiraurl: 'https://jira.mongodb.org/s/en_UScn8g8x/782/6/1.2.5/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=298ba4e7',\n            questions: [],\n            answers: {},\n        }\n    },\n\n    computed: {\n        delugeClass: function(state) {\n            if (state === 'Initial') { return 'deluge' }\n            return 'deluge deluge-expanded'\n        },\n        delugeHeaderClass: function(state) {\n            if (state === 'Initial') { return 'deluge-header' }\n            return 'deluge-header deluge-header-expanded'\n        },\n        delugeBodyClass: function(state) {\n            if (state === 'Initial') { return 'deluge-body' }\n            return 'deluge-body deluge-body-expanded'\n        }\n    },\n\n    methods: {\n        open: function() {\n            if (this.get('state') === 'Initial') {\n                this.set({answers: {}})\n                this.set({'state': 'NotVoted'})\n            }\n        },\n        toggle: function() {\n            this.set({answers: {}})\n\n            if (this.get('state') === 'Initial') {\n                this.set({'state': 'NotVoted'})\n            } else {\n                this.set({'state': 'Initial'})\n            }\n        },\n        submit: function() {\n            const vote = this.get('state')\n            if (typeof vote !== 'boolean') {\n                throw new Error('Assertion failed: Feedback submitted without vote')\n            }\n\n            const fields = {}\n            const answers = this.get('answers')\n            for (const question of Object.keys(answers)) {\n                const answer = answers[question]\n                if (answer !== null && answer !== undefined) {\n                    fields[question] = answer\n                }\n            }\n\n            this.set({state: 'Pending'})\n            this.fire('submit', {\n                vote, fields\n            })\n        },\n        rate: function(value) {\n            this.set({'state': value})\n        },\n        addQuestion: function(type, name, caption) {\n            this.set({questions: this.get('questions').concat({\n                type: type,\n                name: name,\n                caption: caption\n            })})\n\n            return this\n        },\n        update: function(questionName, answer) {\n            this.get('answers')[questionName] = answer\n        },\n        showCollectorDialog: function() {\n            window.ATL_JQ_PAGE_PROPS = {\n                triggerFunction: function(showFunc) {\n                    window.setTimeout(() => showFunc(), 1)\n                },\n                fieldValues: {'summary': `Comment on: \"${this.get('project')}/${this.get('pagename')}\"`}\n            }\n\n            if (!window.jQuery) {\n                const scriptElement = document.createElement('script')\n                scriptElement.type = 'application/javascript'\n                scriptElement.integrity = 'sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44='\n                scriptElement.setAttribute('crossorigin', 'anonymous')\n                scriptElement.src = 'https://code.jquery.com/jquery-2.2.4.min.js'\n                scriptElement.onload = () => {\n                    loadJira(this.get('jiraurl'))\n                }\n                document.body.appendChild(scriptElement)\n            } else {\n                loadJira(this.get('jiraurl'))\n            }\n        }\n    },\n\n    components: {\n        BinaryQuestion,\n        FreeformQuestion\n    }\n}\n</script>\n","import MainWidget from './components/MainWidget.html';\n\nconst FEEDBACK_URL = 'http://deluge.us-east-1.elasticbeanstalk.com/'\n\nfunction addQueryParameters(url/*: string*/, parameters)/*: string*/ {\n    const queryComponents = []\n\n    for (const key of Object.keys(parameters)) {\n        const value = parameters[key]\n        queryComponents.push(`${encodeURIComponent(key)}=${encodeURIComponent(JSON.stringify(value))}`)\n    }\n\n    return url + '?' + queryComponents.join('&')\n}\n\nexport class Deluge {\n    constructor(project/*: string*/, path/*: string*/, root/*: HTMLElement*/) {\n        this.project = project\n        this.path = path\n\n        this.app = new MainWidget({\n            target: root,\n            data: {\n                state: 'Initial',\n                project: project,\n                pagename: path,\n            }\n        })\n\n        this.app.on('submit', event => {\n            this.sendRating(event.vote, event.fields).then(() => {\n                if (event.vote) {\n                    this.app.set({state: 'Voted-Up'})\n                } else {\n                    this.app.set({state: 'Voted-Down'})\n                }\n            }).catch((err) => {\n                console.error('Error submitting feedback')\n            })\n        })\n    }\n\n    askQuestion(name/*: string*/, html/*: string*/)/*: Deluge*/ {\n        this.app.addQuestion('binary', name, html)\n        return this\n    }\n\n    askFreeformQuestion(name/*: string*/, caption/*: string*/)/*: Deluge*/ {\n        this.app.addQuestion('freeform', name, caption)\n        return this\n    }\n\n    sendRating(vote/*: boolean*/, fields)/*: Promise<void>*/ {\n        const path = `${this.project}/${this.path}`\n\n        // Report to Segment\n        const analyticsData = {'useful': vote}\n        for (const fieldName of Object.keys(fields)) {\n            analyticsData[fieldName] = fields[fieldName]\n        }\n        try {\n            window.analytics.track('Feedback Submitted', analyticsData)\n        } catch (err) {\n            console.error(err)\n        }\n\n        // Report to Deluge\n        return new Promise((resolve, reject) => {\n            fields.v = vote\n            fields.p = path\n            const url = addQueryParameters(FEEDBACK_URL, fields)\n\n            // Report this rating using an image GET to work around the\n            // same-origin policy\n            const img = new Image()\n            img.onload = () => {\n                return resolve()\n            }\n            img.onerror = () => {\n                return reject()\n            }\n            img.src = url\n        })\n    }\n\n    open() {\n        this.app.open()\n    }\n}\n","import {Deluge} from 'rigning';\n\nlet project = null;\n\n// Files on which we should not have feedback widgets\nconst blacklist = {\n    'meta/404': true,\n    'search': true\n};\n\nfunction loadPage() {\n    const bodyElements = document.getElementsByClassName('body');\n    if (!bodyElements.length) { return; }\n\n    const pagename = bodyElements[0].getAttribute('data-pagename');\n    if (Object.prototype.hasOwnProperty.call(blacklist, pagename)) {\n        return;\n    }\n\n    const ratingPanelElement = document.getElementById('rating-panel');\n    if (!ratingPanelElement) { return; }\n\n    ratingPanelElement.innerText = '';\n    if (ratingPanelElement) {\n        (new Deluge(project, pagename, ratingPanelElement)).\n            askFreeformQuestion('reason', 'What were you looking for?').\n            askQuestion('findability', 'Did you find it?').\n            askQuestion('accuracy', 'Was the information you found <strong>accurate</strong>?').\n            askQuestion('clarity', 'Was the information <strong>clear</strong>?').\n            askQuestion('fragmentation', 'Was the information you needed <strong>' +\n                        'all on one page</strong>?');\n    }\n}\n\nexport function init() {\n    project = document.body.getAttribute('data-project');\n}\n\nexport function setup() {\n    // We require DOM storage. Don't show anything if support is not present.\n    if (window.localStorage === undefined) { return; }\n\n    loadPage();\n}\n","import {Dispatcher, reportAnalytics, toArray} from './util';\n\nexport const tabsEventDispatcher = new Dispatcher();\n\n/**\n * Show only the first set of tabs at the top of the page.\n * @returns {void}\n */\nfunction hideTabBars() {\n    const isTop = document.querySelector('.tabs-top');\n    if (isTop) {\n        const tabBars = $('.tab-strip--singleton');\n        const mainTabBar = tabBars.first();\n        // Remove any additional tab bars\n        tabBars.slice(1).\n            detach();\n        // Position the main tab bar after the page title\n        mainTabBar.\n            detach().\n            insertAfter('h1').\n            first();\n    }\n}\n\n/**\n * Return the tabPref object containing preferences for tab sets\n * and page specific prefs. Returns an empty object if it doesn't\n * exist.\n * @returns {object} Tab preference object.\n */\nexport function getTabPref() {\n    return JSON.parse(window.localStorage.getItem('tabPref')) || {};\n}\n\n/**\n * Sets the tabPref object depending on whether the tab belongs\n * to set (e.g., \"drivers\") or if it's a one-off page.\n\n * @param {object} pref The \"tabId\" and \"type\" (tab set)\n * @param {boolean} anonymous Whether or not the tab being configured is anonymous.\n * @returns {void}\n */\nexport function setTabPref(pref, anonymous) {\n    const tabPref = getTabPref();\n\n    if (anonymous) {\n        if (!tabPref.pages) {\n            tabPref.pages = {};\n        }\n\n        tabPref.pages[window.location.pathname] = pref.tabId;\n    } else {\n        // Set top-level fields for tab set preferences\n        tabPref[pref.type] = pref.tabId;\n    }\n\n    // Write pref object back to localStorage\n    window.localStorage.setItem('tabPref', JSON.stringify(tabPref));\n}\n\nlet tabSets = {};\nclass TabSet {\n    constructor(tabType, anonymous, tabStripElements, tabContents) {\n        this.type = tabType;\n        this.tabStrips = tabStripElements;\n        this.tabContents = tabContents;\n        this.anonymous = anonymous;\n\n        // A set of all tabIds contained within this TabSet.\n        this.tabIds = {};\n    }\n\n    /**\n     * Return the first singleton tab ID on the page.\n     * @returns {string} The first singleton tab ID found.\n     */\n    getFirstTabId() {\n        const tabsElement = this.tabStrips[0].\n            querySelector('.tab-strip__element[aria-selected=true]');\n        if (!tabsElement) { return null; }\n\n        return tabsElement.getAttribute('data-tabid');\n    }\n\n    setup() {\n        if (this.tabStrips.length === 0) { return; }\n\n        hideTabBars();\n\n        for (const tabStrip of this.tabStrips) {\n            for (const element of tabStrip.querySelectorAll('[data-tabid]')) {\n                this.tabIds[element.getAttribute('data-tabid')] = true;\n\n                element.onclick = (e) => {\n                    // Get the initial position of the tab clicked\n                    // to avoid page jumping after new tab is selected\n                    const initRect = element.getBoundingClientRect();\n\n                    // Get the position where the user scrolled to\n                    const initScrollY = window.scrollY;\n\n                    // Calc the distance from the tab strip to the top\n                    // of whatever the user has scrolled to\n                    const offset = initScrollY - initRect.y;\n\n                    // Get the tab ID of the clicked tab\n                    const tabId = e.target.getAttribute('data-tabid');\n\n                    // Build the pref object to set\n                    const pref = {};\n                    pref.tabId = tabId;\n                    pref.type = this.type;\n\n                    // Check to make sure value is not null, i.e., don't do anything on \"other\"\n                    if (tabId) {\n                        // Save the users preference and re-render\n                        this.update(tabId, true);\n\n                        // Get the position of tab strip after re-render\n                        const rects = element.getBoundingClientRect();\n\n                        // Reset the scroll position of the browser\n                        window.scrollTo(rects.x, rects.y + offset);\n\n                        reportAnalytics('Tab Selected', {\n                            'tabId': tabId,\n                            'title': e.target.innerText,\n                            'tabSet': this.type\n                        });\n\n                        e.preventDefault();\n                    }\n                };\n            }\n        }\n\n        this.update(null, false);\n    }\n\n    update(tabId, isUserAction) {\n        if (this.tabStrips.length === 0) { return; }\n\n        if (!tabId) {\n            const tabPref = getTabPref();\n            if (this.anonymous && tabPref.pages && tabPref.pages[window.location.pathname]) {\n                // Check if current page has a one-off page specific pref\n                tabId = tabPref.pages[window.location.pathname];\n            } else if (tabPref[this.type]) {\n                tabId = tabPref[this.type];\n            }\n        }\n\n        if (!tabId || !this.tabIds[tabId]) {\n            tabId = this.getFirstTabId();\n\n            if (!tabId) { return; }\n        }\n\n        // Show the appropriate tab content and mark the tab as active\n        tabsEventDispatcher.dispatch({\n            'isUserAction': isUserAction,\n            'tabId': tabId,\n            'type': this.type\n        });\n    }\n\n    /**\n     * Marks the selected tab as active, handles special cases for the dropdown\n     * @param {string} currentAttrValue The currently selected tab ID.\n     * @returns {void}\n     */\n    showHideSelectedTab(currentAttrValue) {\n        for (const tabStrip of this.tabStrips) {\n            // Get the <a>, <li> and <ul> of the selected tab\n            const tabLink = $(tabStrip.querySelector(`[data-tabid=\"${currentAttrValue}\"]`));\n            if (!tabLink.length) {\n                continue;\n            }\n\n            const tabList = tabLink.parent('ul');\n\n            // Get the dropdown <a> and <li> for active and label management\n            const dropdownLink = $(tabStrip.querySelector('.dropdown-toggle'));\n            const dropdownListItem = $(tabStrip.querySelector('.dropdown'));\n\n            // Set the active tab, if it's on the dropdown set it to active and change label\n            if (tabList.hasClass('dropdown-menu')) {\n                // Use first so text doesn't repeat if more than one set of tabs\n                dropdownLink.text(`${tabLink.first().text()}`).append('<span class=\"caret\"></span>');\n                dropdownListItem.\n                    attr('aria-selected', true).\n                    siblings().\n                    attr('aria-selected', false);\n            } else {\n                // Set a non-dropdown tab to active, and change the dropdown label back to \"Other\"\n                tabLink.\n                    attr('aria-selected', true).\n                    siblings().\n                    attr('aria-selected', false);\n                dropdownLink.text('Other ').append('<span class=\"caret\"></span>');\n            }\n        }\n\n        const className = `tabpanel-${currentAttrValue}`;\n        for (const contentElement of this.tabContents) {\n            for (const childElement of contentElement.children) {\n                if (childElement.classList.contains(className)) {\n                    childElement.style.display = 'block';\n                } else {\n                    childElement.style.display = 'none';\n                }\n            }\n        }\n    }\n\n    static register(tabElement) {\n        const tabStripElements = toArray(tabElement.getElementsByClassName('tab-strip--singleton'));\n        const tabContent = tabElement.querySelector('.tabs__content');\n        let tabType = tabElement.getAttribute('data-tab-preference');\n        let anonymous = false;\n\n        // If there is no specified tab type, use the first tab's ID\n        if (!tabType) {\n            const firstTabidElement = tabElement.querySelector('[data-tabid]');\n            if (!firstTabidElement) { return; }\n\n            tabType = `anonymous-${firstTabidElement.getAttribute('data-tabid')}`;\n            anonymous = true;\n        }\n\n        if (tabSets[tabType]) {\n            const tabSet = tabSets[tabType];\n            tabSet.tabStrips = tabSet.tabStrips.concat(tabStripElements);\n            tabSet.tabContents.push(tabContent);\n            return;\n        }\n\n        const tabSet = new TabSet(tabType, anonymous, tabStripElements, [tabContent], false);\n        tabSets[tabType] = tabSet;\n    }\n}\n\n// Listen for state changes necessitating a redraw\ntabsEventDispatcher.listen((ctx) => {\n    const tabSet = tabSets[ctx.type];\n    if (tabSet) {\n        // Only save our new preference if we are responding to user input.\n        if (ctx.isUserAction) {\n            setTabPref(ctx, tabSet.anonymous);\n        }\n\n        tabSet.showHideSelectedTab(ctx.tabId);\n    }\n});\n\n// Create tab functionality for code examples\nexport function setup() {\n    tabSets = {};\n\n    const tabsElements = document.getElementsByClassName('tabs');\n    for (let i = 0; i < tabsElements.length; i += 1) {\n        TabSet.register(tabsElements[i]);\n    }\n\n    for (const tabType of Object.keys(tabSets)) {\n        tabSets[tabType].setup();\n    }\n}\n","import {setTabPref, tabsEventDispatcher} from './componentTabs';\nimport {throttle} from './util';\n\nconst headings = [];\n\nfunction recalculate() {\n    const height = document.body.clientHeight - window.innerHeight;\n\n    // This is a bit hacky, but it mostly works. Choose our current\n    // position in the page as a decimal in the range [0, 1], adding\n    // our window size multiplied by 80% of the unadjusted [0, 1]\n    // position.\n    // The 80% is necessary because the last sections of a guide tend to\n    // be shorter, and we need to make sure that scrolling to the bottom\n    // highlights the last section.\n    let currentPosition = document.documentElement.scrollTop / height;\n    currentPosition = (document.documentElement.scrollTop +\n        (currentPosition * 0.8 * window.innerHeight)) / height;\n\n    let bestMatch = [Infinity, null];\n\n    for (const [headingElement, tocElement] of headings) {\n        tocElement.classList.remove('active');\n\n        const headingPosition = headingElement.offsetTop / height;\n        const delta = Math.abs(headingPosition - currentPosition);\n        if (delta <= bestMatch[0]) {\n            bestMatch = [delta, tocElement];\n        }\n    }\n\n    if (bestMatch[1]) {\n        bestMatch[1].classList.add('active');\n    }\n}\n\ndocument.addEventListener('scroll', throttle(recalculate, 150));\n\nfunction setupScrollMonitor() {\n    const leftToc = document.querySelector('.left-toc');\n    if (!leftToc) { return; }\n\n    headings.length = 0;\n    for (const linkElement of leftToc.querySelectorAll('a')) {\n        const id = linkElement.getAttribute('href').slice(1);\n        if (!id) { continue; }\n\n        const headingElement = document.getElementById(id);\n        if (!headingElement) { continue; }\n\n        headings.push([headingElement, linkElement.parentElement]);\n    }\n\n    recalculate();\n}\n\nfunction pillClickHandler(ev) {\n    const tabId = ev.target.getAttribute('data-tab-preference');\n    if (!tabId) { return; }\n\n    setTabPref({\n        'tabId': tabId,\n        'type': 'languages'\n    }, false);\n}\n\nfunction setupLandingPage() {\n    const guidesCategoryListElement = document.getElementsByClassName('guide-category-list')[0];\n    if (!guidesCategoryListElement) { return; }\n\n    const pills = guidesCategoryListElement.getElementsByClassName('guide__pill');\n    for (let i = 0; i < pills.length; i += 1) {\n        pills[i].onclick = pillClickHandler;\n    }\n}\n\n// Guides show the current language in the tab preferences header. Update\n// that if necessary.\nconst showCurrentLanguageElements = document.getElementsByClassName('show-current-language');\ntabsEventDispatcher.listen((ctx) => {\n    if (ctx.type !== 'languages') { return; }\n\n    for (let i = 0; i < showCurrentLanguageElements.length; i += 1) {\n        showCurrentLanguageElements[i].innerText = ctx.tabId;\n    }\n});\n\nexport function setup() {\n    setupScrollMonitor();\n    setupLandingPage();\n}\n","const CLASS_ACTIVATED = 'lightbox__content--activated';\nconst CLASS_SCALABLE = 'lightbox__content--scalable';\n\nconst modal = document.createElement('div');\nmodal.className = 'lightbox__modal';\nmodal.title = 'click to close';\nconst modalContent = document.createElement('img');\nmodalContent.className = 'lightbox__content';\nmodal.appendChild(modalContent);\n\nfunction closeLightbox(ev) {\n    if (ev.type === 'keydown' && ev.key !== 'Escape') {\n        return;\n    }\n\n    modalContent.classList.remove(CLASS_ACTIVATED);\n    if (!modal.parentNode) {\n        return;\n    }\n\n    modal.parentNode.removeChild(modal);\n}\n\n// Wrap an image in a lightbox\nfunction wrapImage(img) {\n    const wrapperElement = document.createElement('div');\n    const captionElement = document.createElement('div');\n\n    wrapperElement.className = 'lightbox__imageWrapper';\n    captionElement.className = 'lightbox__caption';\n    captionElement.innerText = 'click to enlarge';\n\n    img.parentNode.replaceChild(wrapperElement, img);\n    wrapperElement.appendChild(img);\n    wrapperElement.appendChild(captionElement);\n\n    wrapperElement.addEventListener('click', () => {\n        document.body.appendChild(modal);\n        modalContent.src = img.src;\n        modalContent.alt = `${img.alt} — Enlarged`;\n\n        if ((/\\.svg$/).test(modalContent.src)) {\n            modalContent.classList.add(CLASS_SCALABLE);\n        } else {\n            modalContent.classList.remove(CLASS_SCALABLE);\n        }\n\n        modal.addEventListener('click', closeLightbox);\n\n        // Wait until the next DOM tick to make the fade animation work\n        setTimeout(() => {\n            modalContent.classList.add(CLASS_ACTIVATED);\n        }, 0);\n    });\n}\n\n// Intelligently wrap a figure in a lightbox if its natural area is >10%\n// larger than displayed.\nfunction wrapIfNeeded(figure, img) {\n    const naturalArea = img.naturalWidth * img.naturalHeight;\n    const clientArea = img.clientWidth * img.clientHeight;\n    if (clientArea < (naturalArea * 0.9)) {\n        wrapImage(img);\n        figure.classList.add('lightbox');\n    }\n}\n\nexport function setup() {\n    for (const figure of document.getElementsByClassName('lightbox')) {\n        if (figure.children.length === 0 || figure.children[0].tagName !== 'IMG') {\n            continue;\n        }\n\n        wrapImage(figure.children[0]);\n    }\n\n    // Now look at all non-explicitly-lightbox figures to see if they need\n    // the same treatment.\n    for (const figure of document.getElementsByClassName('figure')) {\n        if (figure.children.length === 0 ||\n            figure.children[0].tagName !== 'IMG' ||\n            figure.classList.contains('lightbox')) {\n            continue;\n        }\n\n        const img = figure.children[0];\n\n        if (img.complete) {\n            wrapIfNeeded(figure, img);\n        } else {\n            img.addEventListener('load', wrapIfNeeded.bind(null, figure, img));\n        }\n    }\n\n    // Register our escape handler. This is idempotent\n    document.addEventListener('keydown', closeLightbox);\n}\n","const COLLAPSED_PROPERTY = 'apiref-resource--collapsed';\n\n// We want to let users select a path without toggling the resource's\n// stage (open vs. collapsed). Only consider an event a click if the cursor\n// moved less than 50 pixels in either direction before the button is lifted.\nfunction createClickButNotSelectionHandler(element, onclick) {\n    let dragStart = null;\n\n    element.addEventListener('mousedown', (ev) => {\n        if (ev.button !== 0) { return; }\n        dragStart = ev;\n    });\n\n    element.addEventListener('mouseup', (ev) => {\n        if (ev.button !== 0) { return; }\n        const formerDragStart = dragStart;\n        dragStart = null;\n\n        if (!formerDragStart || (\n            Math.abs(ev.clientX - formerDragStart.clientX) < 50 &&\n            Math.abs(ev.clientY - formerDragStart.clientY) < 50)) {\n            onclick();\n        }\n    });\n}\n\nfunction toggleResource(classListAction, resourceElement) {\n    if (resourceElement.id) {\n        const hash = `#${resourceElement.id}`;\n        window.history.pushState({'href': hash}, '', hash);\n    }\n\n    resourceElement.classList[classListAction](COLLAPSED_PROPERTY);\n}\n\nfunction expand() {\n    const hash = document.location.hash.slice(1);\n    if (!hash) { return; }\n    const requested = document.getElementById(hash);\n    if (!requested) { return; }\n    if (!requested.classList.contains('apiref-resource')) { return; }\n    toggleResource('remove', requested);\n}\n\nwindow.addEventListener('hashchange', expand, false);\n\nexport function setup() {\n    const resourceHeaderElements = document.getElementsByClassName('apiref-resource__header');\n    for (let i = 0; i < resourceHeaderElements.length; i += 1) {\n        const element = resourceHeaderElements[i];\n        createClickButNotSelectionHandler(element,\n            toggleResource.bind(null, 'toggle', element.parentElement));\n    }\n\n    expand();\n}\n","import {reportAnalytics, toArray} from './util';\nimport {tabsEventDispatcher} from './componentTabs';\n\nfunction pillClickHandler(tabType, ev) {\n    const tabId = ev.target.getAttribute('data-tabid');\n    tabsEventDispatcher.dispatch({\n        'isUserAction': true,\n        'tabId': tabId,\n        'type': tabType\n    });\n\n    reportAnalytics('Pill Selected', {\n        'tabId': tabId,\n        'title': ev.target.innerText,\n        'pillSet': tabType\n    });\n}\n\nlet tabTypes = {};\ntabsEventDispatcher.listen((ctx) => {\n    for (const pillStripElement of tabTypes[ctx.type] || []) {\n        const elements = pillStripElement.getElementsByClassName('guide__pill');\n        for (let i = 0; i < elements.length; i += 1) {\n            const element = elements[i];\n            if (element.getAttribute('data-tabid') === ctx.tabId) {\n                elements[i].classList.add('guide__pill--active');\n            } else {\n                elements[i].classList.remove('guide__pill--active');\n            }\n        }\n    }\n});\n\nexport function setup() {\n    tabTypes = {};\n    for (const pillStripElement of document.querySelectorAll('.pillstrip-declaration')) {\n        const tabsType = pillStripElement.getAttribute('data-tab-preference');\n        if (!tabsType) { continue; }\n\n        if (tabTypes[tabsType] === undefined) { tabTypes[tabsType] = []; }\n        tabTypes[tabsType].push(pillStripElement);\n    }\n\n    for (const tabsType of Object.keys(tabTypes)) {\n        const pillStripElements = tabTypes[tabsType];\n        const tabStrips = document.querySelectorAll(`.tabs[data-tab-preference=\"${tabsType}\"] > .tab-strip`);\n        const seenPills = {};\n        const pills = [];\n\n        for (const tabStripElement of tabStrips) {\n            tabStripElement.style.display = 'none';\n\n            let i = -1;\n            let childElements = toArray(\n                tabStripElement.querySelectorAll('.tab-strip__element[data-tabid]'));\n            childElements = childElements.concat(\n                toArray(\n                    tabStripElement.querySelectorAll('.tab-strip__dropdown > li')));\n            for (const childElement of childElements) {\n                i += 1;\n                const tabId = childElement.getAttribute('data-tabid');\n                if (seenPills[tabId] !== undefined) {\n                    continue;\n                }\n\n                seenPills[tabId] = true;\n                pills.splice(i, 0, [tabId, childElement.innerText]);\n            }\n        }\n\n        const clickHandler = pillClickHandler.bind(undefined, tabsType);\n        for (const strip of pillStripElements) {\n            for (const [tabId, tabTitle] of pills) {\n                const pill = document.createElement('li');\n                pill.className = 'guide__pill';\n                pill.setAttribute('data-tabid', tabId);\n                pill.innerText = tabTitle;\n                pill.onclick = clickHandler;\n                strip.appendChild(pill);\n            }\n        }\n    }\n}\n","import * as util from './util';\n\n/* currently open page */\nfunction isCurrentNode($node) {\n    return $node.hasClass('current');\n}\n\nexport function setup() {\n    let $current = $('.sidebar a.current');\n    if (util.isLeafNode($current) || util.requiresPageload($current) || isCurrentNode($current)) {\n        $current.parent('li').addClass('selected-item');\n    }\n    $current.parents('ul').each((index, el) => {\n        $(el).css('display', 'block');\n    });\n\n    $('.sphinxsidebarwrapper > ul li:not(.current) > ul:not(.current)').hide();\n    $('.sphinxsidebarwrapper').show();\n\n    /*\n     * This event handler defines the left-column navigation's behavior\n     * The logic conforms to how sphinx generates the markup\n     * The rules are:\n     *  $('a.current') is the title of the content that is currently rendered\n     *    (this should never be changed client-side)\n     *  $('ul.current, li.current') are the set of lists that are currently expanded\n     *  $('li.selected-item') is the currently highlighted item\n     */\n    $('.sphinxsidebarwrapper .toctree-l1').on('click', 'a', (e) => {\n        const $target = $(e.currentTarget);\n        if (util.isLeafNode($target)) {\n            // Do a full page reload on leaf nodes\n            return;\n        }\n\n        // Release notes has special behavior to click through\n        if (!$target.parent().hasClass('selected-item') && util.requiresPageload($target)) {\n            return;\n        }\n\n        e.preventDefault();\n\n        if ($target.parent().hasClass('current')) {\n            // collapse target node\n            $target.parent().removeClass('current selected-item');\n            $target.siblings('ul').slideUp();\n        } else {\n\n            $current.parent().removeClass('selected-item');\n            // roll up all navigation up to the common ancestor\n            $current.parents().\n                add($current.siblings('ul')).\n                each((index, el) => {\n                    const $el = $(el);\n                    if ($el.has(e.currentTarget).length) {\n                        return;\n                    }\n\n                    if ($el.is('ul')) {\n                        $el.removeClass('current').slideUp();\n                    } else {\n                        $el.removeClass('current');\n                    }\n                });\n            // add css classes for the new 'current' nav item\n            $target.parent().addClass('current');\n            $target.siblings('ul').slideDown(() => {\n                if (util.isLeafNode($target) ||\n                    util.requiresPageload($target) ||\n                    isCurrentNode($current)) {\n                    $target.parent('li').addClass('selected-item');\n                }\n            });\n            // set new $current\n            $current = $target;\n        }\n    });\n\n    /* Add expand icons to indicate what's expandable and what's a link. This\n       is necessary when (1) we're at a leaf node, or (2) the menu triggers\n       a page load. */\n    $('.sphinxsidebarwrapper > ul ul a.reference').prepend(function(index) {\n        const expandElement = $('<span class=\"expand-icon\"></span>');\n        const self = $(this);\n\n        if (!util.isLeafNode(self)) {\n            expandElement.addClass('docs-expand-arrow');\n        }\n\n        return expandElement;\n    });\n}\n","const SAMPLE_FACTORS = {\n    'charts': 0.12158,\n    'guides': 0.02644,\n    'stitch': 0.03162,\n    'docs-ruby': 0.47984,\n    'ecosystem': 0.00997,\n    'docs-php-library': 0.04165,\n    'atlas': 0.01176,\n    'compass': 0.01684,\n    'manual': 0.00022,\n    'landing': 0.00806,\n    'mongoid': 0.07576,\n    'mms-cloud': 0.06358,\n    'mms-onprem': 0.01790,\n    'bi-connector': 0.03912,\n    'spark-connector': 0.05562\n};\n\nexport function initialize() {\n    /* eslint-disable */\n\n    // Delighted\n    !function(e,t,r,n,a){if(!e[a]){for(var i=e[a]=[],s=0;s<r.length;s++){var c=r[s];i[c]=i[c]||function(e){return function(){var t=Array.prototype.slice.call(arguments);i.push([e,t])}}(c)}i.SNIPPET_VERSION=\"1.0.1\";var o=t.createElement(\"script\");o.type=\"text/javascript\",o.async=!0,o.src=\"https://d2yyd1h5u9mauk.cloudfront.net/integrations/web/v1/library/\"+n+\"/\"+a+\".js\";var l=t.getElementsByTagName(\"script\")[0];l.parentNode.insertBefore(o,l)}}(window,document,[\"survey\",\"reset\",\"config\",\"init\",\"set\",\"get\",\"event\",\"identify\",\"track\",\"page\",\"screen\",\"group\",\"alias\"],\"Dk30CC86ba0nATlK\",\"delighted\");\n\n    // Segment\n    !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error(\"Segment snippet included twice.\");else{analytics.invoked=!0;analytics.methods=[\"trackSubmit\",\"trackClick\",\"trackLink\",\"trackForm\",\"pageview\",\"identify\",\"reset\",\"group\",\"track\",\"ready\",\"alias\",\"debug\",\"page\",\"once\",\"off\",\"on\"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement(\"script\");n.type=\"text/javascript\";n.async=!0;n.src=\"https://cdn.segment.com/analytics.js/v1/\"+t+\"/analytics.min.js\";var a=document.getElementsByTagName(\"script\")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION=\"4.1.0\";\n        analytics.load(\"aGhVvyxnPWlyP71vVl9ZjGWxAtoVGLXX\");\n    }}();\n}\n\nexport function setup(fastNav) {\n    const project = document.body.getAttribute('data-project');\n    const branch = document.body.getAttribute('data-branch');\n\n    try {\n        const sampleFactor = SAMPLE_FACTORS[project] || 0.1;\n        window.delighted.survey({\n            minTimeOnPage: 180,\n            sampleFactor: sampleFactor,\n            properties: {\n              project,\n              branch,\n            }\n        });\n    } catch (err) {\n        console.error(err);\n    }\n\n    // Update Segment\n    try {\n        window.analytics.page({\n          path: location.pathname,\n          url: location.href,\n          project: project,\n          branch: branch\n        });\n    } catch (err) {\n        console.error(err);\n    }\n}\n","import {getTabPref, tabsEventDispatcher} from './componentTabs';\n\nconst STYLE_SELECTED = 'guide__deploymentpill--active';\nconst STYLE = 'guide__pill';\nconst STYLE_DEPLOY = 'guide__deploymentpill';\nconst STYLE_DEPLOYTEXT = 'show-current-deployment';\n\n\nfunction setToggleState(id) {\n    const elements = document.getElementsByClassName(STYLE);\n    for (let i = 0; i < elements.length; i += 1) {\n        const element = elements[i];\n        if (element.getAttribute('data-tabid') === id) {\n            elements[i].classList.add(STYLE_SELECTED);\n        } else {\n            elements[i].classList.remove(STYLE_SELECTED);\n        }\n    }\n    if (document.getElementsByClassName(STYLE_DEPLOYTEXT).length > 0) {\n        document.getElementsByClassName(STYLE_DEPLOYTEXT)[0].innerHTML = id;\n    }\n}\n\ntabsEventDispatcher.listen((ctx) => {\n    if (ctx.type === 'cloud') {\n        setToggleState(ctx.tabId);\n    }\n});\n\nfunction dispatchState(cloudState) {\n    tabsEventDispatcher.dispatch({\n        'isUserAction': true,\n        'tabId': cloudState,\n        'type': 'cloud'\n    });\n}\n\nfunction addListenersToPills(element) {\n    element.addEventListener('click', (event) => {\n        tabsEventDispatcher.dispatch({\n            'isUserAction': true,\n            'tabId': event.target.innerHTML,\n            'type': 'cloud'\n        });\n    });\n}\n\nfunction getTabNode(nodeName, pref) {\n    const element = document.createElement('li');\n    element.classList.add(STYLE);\n    element.classList.add(STYLE_DEPLOY);\n    element.setAttribute('data-tabid', nodeName);\n    element.innerHTML = nodeName;\n    addListenersToPills(element);\n    setToggleState(nodeName);\n    return element;\n}\n\nexport function setup() {\n    // we use a sort of reflection to figure out if this needs to display\n\n    const parent = document.getElementsByClassName('guide-prefs__deploy')[0];\n    if (parent === undefined) {\n        return;\n    }\n    if (document.getElementsByClassName('tabpanel-cloud').length === 0 &&\n        document.getElementsByClassName('guide-prefs__deploy').length > 0) {\n        document.getElementsByClassName('guide-prefs__deploy')[0].style.display = 'none';\n        return;\n    }\n    const tabPrefs = getTabPref();\n    if (tabPrefs.cloud === undefined) {\n        tabPrefs.cloud = 'local';\n    }\n    // setToggleState(tabPrefs.cloud);\n    const list = document.createElement('ul');\n    list.classList.add('guide__pills');\n    list.classList.add('pillstrip-declaration');\n    list.setAttribute('role', 'tablist');\n    list.setAttribute('data-tab-preference', 'cloud');\n    list.appendChild(getTabNode('cloud', tabPrefs.cloud));\n    list.appendChild(getTabNode('local', tabPrefs.cloud));\n    parent.appendChild(list);\n    setToggleState(tabPrefs.cloud);\n    dispatchState(tabPrefs.cloud);\n}\n","import {tabsEventDispatcher} from './componentTabs';\n\nconst LOCALSTORAGE_KEY_LOCAL = 'uriwriter_local';\nconst LOCALSTORAGE_KEY_ATLAS = 'uriwriter_atlas';\nconst LOCALSTORAGE_KEY_CURRENT_STATE = 'uriwriter_currentstate';\n\nconst TEMPLATE_TYPE_SELF_MANAGED = 'local MongoDB';\nconst TEMPLATE_TYPE_REPLICA_SET = 'local MongoDB with replica set';\nconst TEMPLATE_TYPE_ATLAS_36 = 'Atlas (Cloud) v. 3.6';\nconst TEMPLATE_TYPE_ATLAS_34 = 'Atlas (Cloud) v. 3.4';\nconst TEMPLATE_TYPE_ATLAS = 'Atlas (Cloud)';\n\nconst TEMPLATES = {\n    [TEMPLATE_TYPE_SELF_MANAGED]: {\n        'options': [\n            {\n                'name': 'authSource',\n                'type': 'text'\n            }\n        ],\n        'template': 'mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]',\n        'templatePasswordRedactedShell': 'mongodb://$[hostlist]/$[database]?$[options] --username $[username]',\n        'templateShell': 'mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]'\n    },\n    [TEMPLATE_TYPE_REPLICA_SET]: {\n        'options': [\n            {\n                'name': 'replicaSet',\n                'type': 'text'\n            },\n            {\n                'name': 'authSource',\n                'type': 'text'\n            },\n            {\n                'name': 'ssl',\n                'type': 'pass-through',\n                'value': 'true'\n            }\n        ],\n        'template': 'mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]',\n        'templatePasswordRedactedShell': 'mongodb://$[hostlist]/$[database]?$[options] --username $[username] --password',\n        'templateShell': 'mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]'\n    },\n    [TEMPLATE_TYPE_ATLAS_36]: {\n        'options': [],\n        'template': 'mongodb+srv://$[username]:$[password]@$[hostlist]/$[database]?retryWrites=true',\n        'templatePasswordRedactedShell': 'mongodb+srv://$[hostlist]/$[database] --username $[username] --password',\n        'templateShell': 'mongodb+srv://$[username]:$[password]@$[hostlist]/$[database]'\n    },\n    [TEMPLATE_TYPE_ATLAS_34]: {\n        'options': [\n            {\n                'name': 'replicaSet',\n                'type': 'text'\n            },\n            {\n                'name': 'authSource',\n                'type': 'text'\n            },\n            {\n                'name': 'ssl',\n                'type': 'pass-through',\n                'value': 'true'\n            }\n        ],\n        'template': 'mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]',\n        'templatePasswordRedactedShell': 'mongodb://$[hostlist]/$[database]?replicaSet=$[replicaSet] --ssl --authenticationDatabase $[authSource] --username $[username] --password',\n        'templateShell': 'mongodb://$[hostlist]/$[database]?replicaSet=$[replicaSet] --ssl --authenticationDatabase $[authSource] --username $[username] --password $[password]'\n    }\n};\n\nfunction getValue(value, option) {\n    if (option.type === 'pass-through') {\n        return option.value;\n    }\n\n    return value;\n}\n\nfunction getPrefix(uri) {\n    if ((uri.charAt(0) === '\\'') ||\n        (uri.charAt(0) === '\"')) {\n        return uri.charAt(0);\n    }\n    return '';\n}\n\nconst PLACEHOLDER_PATTERN =\n    /&lt;(?:(?:URISTRING(?:_(?:(?:SHELL_NOUSER)|(?:SHELL)))?)|(?:USERNAME))&gt;/g;\nfunction preparseUristrings() {\n    const elements = document.getElementsByTagName('pre');\n    for (let i = 0; i < elements.length; i += 1) {\n        elements[i].innerHTML = elements[i].innerHTML.replace(\n            PLACEHOLDER_PATTERN,\n            '<span class=\"uristring-element\">$&</span>');\n    }\n}\n\nfunction validateHost(host) {\n    const parsed = (/^\\s*([^:\\s]+)(?::(\\d+))?\\s*$/).exec(host);\n    if (!parsed) {\n        throw new Error('Invalid host format: must match the format \"hostname:port\"');\n    }\n\n    const port = parseInt(parsed[2], 10);\n    if (isNaN(port)) {\n        throw new Error('Missing port: host must match the format \"hostname:port\"');\n    }\n\n    if (port > 65535) {\n        throw new Error('Port number is too large');\n    }\n\n    return [parsed[1], port];\n}\n\nfunction conveyInvalidParse(statusElement) {\n    statusElement.classList.add('mongodb-form__status--invalid');\n    statusElement.classList.remove('mongodb-form__status--good');\n    statusElement.style.display = '';\n    statusElement.innerText = 'Connection string could not be parsed';\n    // do something? email?\n}\n\nfunction conveyValidParse(statusElement) {\n    statusElement.classList.add('mongodb-form__status--good');\n    statusElement.classList.remove('mongodb-form__status--invalid');\n    statusElement.style.display = '';\n    statusElement.innerText = 'Connection string parsed';\n}\n\nfunction splitOptions(tempWriter, arrayOfMatches) {\n    const settingsArray = arrayOfMatches.split('&');\n    if (settingsArray.length > 0) {\n        for (let i = 0; i < settingsArray.length; i += 1) {\n            const keyValue = settingsArray[i].split('=');\n            tempWriter[keyValue[0]] = keyValue[1];\n        }\n    }\n}\n\nclass HostList {\n    constructor(rootElement, uriWriter) {\n        this.root = rootElement;\n\n        this.uriWriter = uriWriter;\n        this.elementPairs = [];\n        this.updateHostsFromUriWriter();\n    }\n\n    get hosts() {\n        return this.elementPairs.map((pair) => pair[0].value.trim()).filter((host) => host);\n    }\n\n    get lastInput() {\n        return this.elementPairs[this.elementPairs.length - 1][0];\n    }\n\n    updateHostsFromUriWriter() {\n        this.elementPairs = [];\n        this.root.innerText = '';\n        const state = this.uriWriter.loadState(this.uriWriter.loadCurrentState());\n        for (const host of state.hostlist || []) {\n            this.addHost(host);\n        }\n\n        this.addHost();\n    }\n\n    addHost(host) {\n        const inputElement = document.createElement('input');\n        inputElement.className = 'mongodb-form__input';\n        inputElement.placeholder = 'localhost:27017';\n        inputElement.value = host || '';\n        const statusElement = document.createElement('div');\n        statusElement.className = 'mongodb-form__status';\n\n        inputElement.oninput = () => {\n            if (inputElement.value) {\n                if (this.lastInput === inputElement) {\n                    this.addHost();\n                }\n            } else if (this.lastInput !== inputElement) {\n                this.elementPairs = this.elementPairs.filter((x) => x[0] !== inputElement);\n                this.root.removeChild(inputElement);\n                this.root.removeChild(statusElement);\n\n                this.uriWriter.setHosts(this.hosts);\n                return;\n            }\n\n            try {\n                validateHost(inputElement.value);\n            } catch (err) {\n                inputElement.setCustomValidity(err.message);\n                statusElement.innerText = err.message;\n                statusElement.classList.add('mongodb-form__status--invalid');\n                return;\n            }\n\n            statusElement.innerText = '';\n            statusElement.classList.remove('mongodb-form__status--invalid');\n            inputElement.setCustomValidity('');\n\n            this.uriWriter.setHosts(this.hosts);\n        };\n\n        this.root.appendChild(inputElement);\n        this.root.appendChild(statusElement);\n        this.elementPairs.push([inputElement, statusElement]);\n    }\n}\n\nlet uriwriterSingleton = null;\nclass UriwriterSingleton {\n    constructor() {\n        // an array of DOM objects that care about changes to the URI\n        this.uristowrite = [];\n        this.usernamestowrite = [];\n        this.uristowritepasswordredactedshell = [];\n        this.uristowriteshell = [];\n        // this.uristringPasswordRedacted = 'mongodb://$[hostlist]/$[database]?$[options]';\n        this.urireplacestring = '';\n        this.options = {};\n\n        this.hostList = null;\n\n        // setup listeners on the page to changes in uri fields (view)\n        this.setupURIListeners();\n        // calculate and propagate the URI (controller)]\n        this.loadTemplateEnv();\n        this.renderURI();\n        this.registerDispatch();\n    }\n\n    loadTemplateEnv() {\n\n        if (this.loadState(this.loadCurrentState()).env === undefined) {\n            if (this.loadCurrentState() === 'local' ||\n                this.loadCurrentState() === 'undefined') {\n                this.saveState({'env': TEMPLATE_TYPE_SELF_MANAGED}, 'local');\n            } else {\n                this.saveState({'env': TEMPLATE_TYPE_ATLAS_36}, 'cloud');\n            }\n        }\n    }\n\n    // get stuff related to this component out of local storage\n    loadState(atlas) {\n        if (atlas === 'cloud') {\n            return JSON.parse(window.localStorage.getItem(LOCALSTORAGE_KEY_ATLAS)) || {};\n        }\n        return JSON.parse(window.localStorage.getItem(LOCALSTORAGE_KEY_LOCAL)) || {};\n    }\n\n    // put stuff related to this coponent in local storage, we only set\n    // the whole thing, not portions\n    saveState(state, atlas) {\n        if (atlas === 'cloud') {\n            window.localStorage.setItem(LOCALSTORAGE_KEY_ATLAS, JSON.stringify(state));\n        }\n        else {\n            window.localStorage.setItem(LOCALSTORAGE_KEY_LOCAL, JSON.stringify(state));\n        }\n    }\n\n    loadCurrentState() {\n        return window.localStorage.getItem(LOCALSTORAGE_KEY_CURRENT_STATE);\n    }\n\n    saveCurrentState(atlasState) {\n        window.localStorage.setItem(LOCALSTORAGE_KEY_CURRENT_STATE, atlasState);\n    }\n\n    // add or modify a value in our uriwriter in local storage.\n    addValue(key, value) {\n        const uriwriter = this.loadState(this.loadCurrentState());\n        if (key !== 'atlaspasteduri' && key !== 'env') {\n            delete uriwriter.atlaspasteduri;\n        }\n        uriwriter[key] = value;\n        this.saveState(uriwriter, this.loadCurrentState());\n    }\n\n    // setup view hooks to change when data or environment changes\n    setupURIListeners() {\n        preparseUristrings();\n        const list = document.getElementsByClassName('uristring-element');\n        for (let i = 0; i < list.length; i += 1) {\n            if (list[i].innerHTML.indexOf('&lt;URISTRING&gt;') > -1) {\n                this.uristowrite.push(list[i]);\n            }\n            if (list[i].innerHTML.indexOf('&lt;USERNAME&gt;') > -1) {\n                this.usernamestowrite.push(list[i]);\n            }\n            if (list[i].innerHTML.indexOf('&lt;URISTRING_SHELL&gt;') > -1) {\n                this.uristowriteshell.push(list[i]);\n            }\n            if (list[i].innerHTML.indexOf('&lt;URISTRING_SHELL_NOUSER&gt;') > -1) {\n                this.uristowritepasswordredactedshell.push(list[i]);\n            }\n        }\n    }\n\n    writeToPlaceholders() {\n        for (let i = 0; i < this.uristowrite.length; i += 1) {\n            const prefix = getPrefix(this.uristowrite[i].innerHTML);\n            this.uristowrite[i].innerHTML = `${prefix}${this.urireplacestring}${prefix}`;\n        }\n        for (let i = 0; i < this.uristowritepasswordredactedshell.length; i += 1) {\n            this.uristowritepasswordredactedshell[i].innerHTML =\n                this.urireplacestringPasswordRedactedShell;\n        }\n        for (let i = 0; i < this.uristowriteshell.length; i += 1) {\n            this.uristowriteshell[i].innerHTML = this.urireplacestringShell;\n        }\n        // node use case for separation of username out of uri for encoding\n        for (let i = 0; i < this.usernamestowrite.length; i += 1) {\n            this.usernamestowrite[i].innerHTML = this.username;\n        }\n    }\n\n    setEnvironment(env) {\n        const isAtlas = env.startsWith(TEMPLATE_TYPE_ATLAS);\n        if (isAtlas) {\n            this.saveCurrentState('cloud');\n        } else {\n            this.saveCurrentState('local');\n        }\n        const state = this.loadState(this.loadCurrentState());\n        const haveWidgetOnPage = Boolean(document.getElementById('uriwriter'));\n        if (isAtlas && haveWidgetOnPage) {\n            document.getElementsByClassName('atlascontrols__status')[0].style.display =\n                'none';\n\n            if (state.atlaspasteduri !== undefined) {\n                // move all of this to an encapsulating function;\n                this.parseIncomingAtlasString(state.atlaspasteduri);\n                this.renderURI();\n                this.populateForm();\n                return;\n            }\n        }\n\n        if ((state !== undefined &&\n            state.env !== undefined &&\n            state.env.startsWith(TEMPLATE_TYPE_ATLAS)) || isAtlas) {\n            // this.saveState({});\n\n            if (haveWidgetOnPage) {\n                this.hostList.updateHostsFromUriWriter();\n            }\n        }\n\n        this.addValue('env', env);\n        this.renderURI();\n\n        if (haveWidgetOnPage) {\n            this.populateForm();\n        }\n    }\n\n    toggleEnvironmentExternal(atlas) {\n        const element = document.getElementById('deployment_type');\n        if (atlas === 'cloud') {\n            element.style.display = 'none';\n        } else {\n            element.style.display = 'block';\n        }\n    }\n    // this is the listener that is triggered when an environment select happens\n    setupEnvironmentListeners() {\n        const elements = document.getElementsByClassName('uriwriter__toggle');\n        let initiallySelected = this.loadState(this.loadCurrentState()).env;\n        if (initiallySelected === TEMPLATE_TYPE_ATLAS_36 ||\n            initiallySelected === TEMPLATE_TYPE_ATLAS_34) {\n            initiallySelected = TEMPLATE_TYPE_ATLAS;\n        }\n\n        for (let i = 0; i < elements.length; i += 1) {\n            if (initiallySelected === elements[i].innerHTML) {\n                elements[i].classList.add('guide__pill--active');\n            }\n\n            elements[i].onclick = (event) => {\n                const element = event.target;\n\n                const parentChildren = element.parentElement.children;\n                for (let childIndex = 0; childIndex < parentChildren.length; childIndex += 1) {\n                    parentChildren[childIndex].classList.remove('guide__pill--active');\n                }\n\n                element.classList.add('guide__pill--active');\n                this.setEnvironment(element.innerHTML);\n            };\n        }\n    }\n\n    // controller for writing the uri out to the listening html\n    renderURI() {\n        // User is in Atlas placeholder mode, no template defined. Can't render a uri.\n        // or should we default?\n        if (this.loadState(this.loadCurrentState()).env === TEMPLATE_TYPE_ATLAS) {\n            this.addValue('env', TEMPLATE_TYPE_ATLAS_36);\n        }\n        // we have a basic idea of the environment, get the associated uri template\n        const template = TEMPLATES[this.loadState(this.loadCurrentState()).env];\n\n        if (!template) { return; }\n\n        // the placeholder uri string template\n        this.uristring = template.template;\n        // options are environment specific settings that need to go in the uri\n        this.options = template.options;\n        // no we do our replacing of template fields\n        this.urireplacestring = this.replaceString(this.uristring, '&');\n        // on the redacted one as well\n        this.urireplacestringShell = this.replaceString(template.templateShell, ',');\n        this.urireplacestringPasswordRedactedShell =\n            this.replaceString(template.templatePasswordRedactedShell, ',');\n        this.username = this.loadState(this.loadCurrentState()).username;\n        this.writeToPlaceholders();\n    }\n\n    optionStringifier(options, optionJoinCharacter) {\n        const parts = [];\n        const state = this.loadState(this.loadCurrentState());\n\n        for (let i = 0; i < this.options.length; i += 1) {\n            const option = this.options[i];\n            const name = option.name;\n            let value = getValue(state[name], option);\n            if (!value) {\n                if (option.placeholder) {\n                    value = option.placeholder;\n                } else {\n                    value = `$[${name}]`;\n                }\n            }\n            parts.push(`${name}=${value}`);\n        }\n\n        return parts.join(optionJoinCharacter);\n    }\n\n    replaceString(localUriString, optionJoinCharacter) {\n        const state = this.loadState(this.loadCurrentState());\n\n        // replace hardcoded plaments (why oh why do we do this????)\n        if (state.username) {\n            localUriString = localUriString.replace('$[username]', state.username);\n        }\n        if (state.database) {\n            localUriString = localUriString.replace('$[database]', state.database);\n        }\n        if (state.authSource) {\n            localUriString = localUriString.replace('$[authSource]', state.authSource);\n        }\n        if (state.replicaSet) {\n            localUriString = localUriString.replace('$[replicaSet]', state.replicaSet);\n        }\n\n        // replace options where they exist\n        const optionsString = this.optionStringifier(this.options, optionJoinCharacter);\n\n        if (optionsString.length > 0) {\n            localUriString = localUriString.replace('$[options]', optionsString);\n        }\n\n        // get our hosts and ports in\n        if (state.hostlist && state.hostlist.length > 0) {\n            localUriString = localUriString.replace('$[hostlist]', state.hostlist.join(','));\n        }\n\n        return localUriString;\n    }\n\n    renderOptions() {\n        const elements = document.getElementsByClassName('uriwriter__option-prompt');\n        while (elements.length > 0) {\n            elements[0].parentElement.removeChild(elements[0]);\n        }\n\n        if (this.options && this.options.length > 0) {\n            for (let i = 0; i < this.options.length; i += 1) {\n                if (this.options[i].type !== 'pass-through') {\n                    this.renderOption(this.options[i]);\n                }\n            }\n        }\n    }\n\n    renderOption(option) {\n        const optionElement = document.createElement('label');\n        optionElement.className = 'mongodb-form__prompt uriwriter__option-prompt';\n\n        const label = document.createElement('div');\n        label.className = 'mongodb-form__label';\n        label.innerText = option.name;\n\n        const inputElement = document.createElement('input');\n        inputElement.setAttribute('id', option.name);\n        if (option.placeholder) {\n            inputElement.setAttribute('placeholder', option.placeholder);\n        }\n        inputElement.className = 'mongodb-form__input';\n        if (this.loadState(this.loadCurrentState())[option.name] !== undefined) {\n            inputElement.value = this.loadState(this.loadCurrentState())[option.name];\n        }\n        inputElement.addEventListener('input', (event) => {\n            this.addValue(option.name, document.getElementById(option.name).value);\n            this.renderURI();\n        });\n\n        optionElement.appendChild(label);\n        optionElement.appendChild(inputElement);\n\n        const serverPromptElement = document.querySelector('[data-server-configuration]');\n        serverPromptElement.parentElement.insertBefore(optionElement, serverPromptElement);\n    }\n\n    initializeWidget() {\n        if (!document.getElementById('uriwriter')) {\n            return;\n        }\n\n        this.hostList = new HostList(document.getElementById('hostlist'), this);\n\n        document.getElementById('uriwriter_username').addEventListener('input', (event) => {\n            this.addValue('username', event.target.value);\n            this.renderURI();\n        });\n\n        const atlaspaste = document.getElementById('uriwriter_atlaspaste');\n        const statusElement = document.getElementsByClassName('atlascontrols__status')[0];\n\n        atlaspaste.oninput = (event) => {\n            const pastedValue = atlaspaste.value;\n            if (!pastedValue.trim()) {\n                statusElement.style.display = 'none';\n                atlaspaste.setCustomValidity('');\n                return;\n            }\n\n            if (!this.parseIncomingAtlasString(pastedValue)) {\n                atlaspaste.setCustomValidity('Failed to parse');\n                conveyInvalidParse(statusElement);\n            } else {\n                atlaspaste.setCustomValidity('');\n                this.addValue('atlaspasteduri', pastedValue);\n                conveyValidParse(statusElement);\n                this.renderURI();\n                this.populateForm();\n            }\n        };\n\n        document.getElementById('uriwriter_db').addEventListener('input', (event) => {\n            this.addValue('database', document.getElementById('uriwriter_db').value);\n            this.renderURI();\n        });\n        this.setupEnvironmentListeners();\n        this.populateForm();\n    }\n\n    renderFormValues() {\n        const state = this.loadState(this.loadCurrentState());\n        const atlasControlsElement = document.getElementsByClassName('uriwriter__atlascontrols')[0];\n        if (state.env === TEMPLATE_TYPE_SELF_MANAGED || state.env === TEMPLATE_TYPE_REPLICA_SET) {\n            atlasControlsElement.style.display = 'none';\n            document.getElementById('userinfo_form').style.display = '';\n        } else {\n            document.getElementById('uriwriter_atlaspaste').value = state.atlaspasteduri || '';\n\n            if (state.atlaspasteduri !== undefined) {\n                atlasControlsElement.style.display = '';\n            } else {\n                atlasControlsElement.style.display = 'none';\n            }\n\n            document.getElementById('userinfo_form').style.display = 'none';\n            atlasControlsElement.style.display = '';\n            return;\n        }\n        if (state.username !== undefined) {\n            document.getElementById('uriwriter_username').value = state.username;\n        }\n        if (state.database !== undefined) {\n            document.getElementById('uriwriter_db').value = state.database;\n        }\n    }\n\n    /** IP related functions **/\n\n    setHosts(hostlist) {\n        const uriwriter = this.loadState(this.loadCurrentState());\n        uriwriter.hostlist = hostlist;\n        this.saveState(uriwriter, this.loadCurrentState());\n        this.renderURI();\n    }\n\n    populateForm() {\n        this.toggleEnvironmentExternal(this.loadCurrentState());\n        this.renderOptions();\n        this.renderFormValues();\n        this.hostList = new HostList(document.getElementById('hostlist'), this);\n    }\n\n    registerDispatch() {\n        tabsEventDispatcher.listen((ctx) => {\n            if (!uriwriterSingleton) { return; }\n            this.renderURI();\n            if (ctx.type !== 'cloud') { return; }\n            // tricky: we only want to change the pill state on toggle\n            if (ctx.tabId === 'cloud') {\n                if (this.loadCurrentState() === 'cloud') { return; }\n                this.saveCurrentState('cloud');\n                this.loadTemplateEnv();\n                this.renderURI();\n                // this.toggleEnvironmentExternal('cloud');\n            } else {\n                if (this.loadCurrentState() === 'local') { return; }\n                this.saveCurrentState('local');\n                this.loadTemplateEnv();\n                this.renderURI();\n                // this.toggleEnvironmentExternal('local');\n            }\n            const haveWidgetOnPage = Boolean(document.getElementById('uriwriter'));\n            if (haveWidgetOnPage) {\n                this.populateForm();\n            }\n        });\n    }\n\n\n    /** Atlas copy paste parse and processing **/\n\n    parseOutShellParams(splitOnSpace, tempWriter) {\n        // go through all of the command line args, parse\n        for (let i = 0; i < splitOnSpace.length; i += 1) {\n            if (splitOnSpace[i].startsWith('--')) {\n                // this is a key, if next val does not begin with --, its a value\n                if (!splitOnSpace[i + 1].startsWith('--')) {\n                    let splitKey = splitOnSpace[i].replace('--', '');\n                    let splitValue = splitOnSpace[i + 1];\n\n                    if (splitKey === 'authenticationDatabase') {\n                        splitKey = 'authSource';\n                    }\n\n                    // sometimes the next string is another parameter,\n                    // ignore those as they are canned\n                    if (!splitValue.startsWith('--')) {\n                        // get rid of brackets which can cause problems with our inline code\n                        splitValue = splitValue.replace('<', '').replace('>', '');\n                        tempWriter[splitKey] = splitValue;\n                    }\n                }\n            }\n        }\n    }\n\n    parseOutURIParams(shellString, tempWriter) {\n        const uriParamArray = shellString.split('&');\n        for (let i = 0; i < uriParamArray.length; i += 1) {\n            const keyValueString = uriParamArray[i];\n            const keyValueArray = keyValueString.split('=');\n            tempWriter[keyValueArray[0]] = keyValueArray[1];\n        }\n    }\n\n    parseOutEnvAndClusters(splitOnSpaceClusterEnv, tempWriter) {\n        // depending on whether this is 3.6 or 3.4 the cluster info looks slightly different\n        // 3.4 uses the URI to pass in a replica set name\n        let shellMatch = /(\\w+):\\/\\/((\\S+)(:)+(\\S+))\\/(\\w+)?\\?(\\S+)/;\n        const shellMatch36 = /((\\w+)\\+(\\w+)):\\/\\/((\\S+))\\/(\\w+)/;\n        if (splitOnSpaceClusterEnv.startsWith('mongodb+srv')) {\n            shellMatch = shellMatch36;\n        }\n        const shellArray = splitOnSpaceClusterEnv.match(shellMatch);\n        // add length check here?\n        if (shellArray[1] === 'mongodb') {\n            tempWriter.env = TEMPLATE_TYPE_ATLAS_34;\n            const hostListString = shellArray[2];\n            tempWriter.hostlist = hostListString.split(',');\n            this.parseOutURIParams(shellArray[7], tempWriter);\n        } else {\n            tempWriter.env = TEMPLATE_TYPE_ATLAS_36;\n            tempWriter.hostlist = [shellArray[4]];\n        }\n        tempWriter.database = shellArray[6];\n    }\n    // mongo \"mongodb://cluster0-shard-00-00-igkvv.mongodb.net:27017,cluster0-shard-00-01-igkvv.mongodb.net:27017,cluster0-shard-00-02-igkvv.mongodb.net:27017/test?replicaSet=Cluster0-shard-0\" --ssl --authenticationDatabase admin --username mongodb-stitch-easy_bake_oven-aluyj --password <PASSWORD>\n    // mongo \"mongodb+srv://cluster0-igkvv.mongodb.net/test\" --username mongodb-stitch-easy_bake_oven-aluyj\n    parseShell(atlasString, tempWriter) {\n        // split out the mongo and parse the rest\n        const splitOnSpace = atlasString.split(' ');\n        let splitOnSpaceClusterEnv = splitOnSpace[1];\n        // get rid of double quotes\n        splitOnSpaceClusterEnv = splitOnSpaceClusterEnv.replace(/\"/g, '');\n        // get command line args\n        this.parseOutShellParams(splitOnSpace, tempWriter);\n        // get the cluster information\n        this.parseOutEnvAndClusters(splitOnSpaceClusterEnv, tempWriter);\n\n        this.saveState(tempWriter, 'cloud');\n\n        // we need to define success\n        return true;\n    }\n\n    // get the pasted string and parse it out\n    parseIncomingAtlasString(pastedValue) {\n        if (pastedValue === undefined) {\n            return false;\n        }\n        // trim any carriage return line feed business\n        pastedValue = pastedValue.replace(/[\\n\\r]+/g, '').trim();\n        if (pastedValue !== null) {\n            const status = this.parseAtlasString(pastedValue);\n            this.hostList.updateHostsFromUriWriter();\n            return status;\n        }\n        return false;\n    }\n\n    // this is a 3.4 URI\n    // mongodb://<USERNAME>:<PASSWORD>@cluster0-shard-00-00-juau5.mongodb.net:27017,cluster0-shard-00-01-juau5.mongodb.net:27017,cluster0-shard-00-02-juau5.mongodb.net:27017/test?ssl=true&replicaSet=Cluster0-shard-0&authSource=admin\n    parseTo3dot4(atlasString, tempWriter) {\n        tempWriter.env = TEMPLATE_TYPE_ATLAS_34;\n        // save the environment selection\n        this.saveState(tempWriter, 'cloud');\n        tempWriter = this.loadState(this.loadCurrentState());\n        const re = /(\\S+):\\/\\/(\\S+):(\\S*)@(\\S+)\\/(\\S+)\\?(\\S+)/;\n        const matchesArray = atlasString.match(re);\n        if (!matchesArray) {\n            return false;\n        }\n\n        tempWriter.username = matchesArray[2];\n        tempWriter.hostlist = matchesArray[4].split(',');\n        tempWriter.database = matchesArray[5];\n        splitOptions(tempWriter, matchesArray[6]);\n        this.saveState(tempWriter, this.loadCurrentState());\n        return true;\n    }\n\n    // this is a 3.6 url, parse accordingly\n    // ex: mongodb+srv://<USERNAME>:<PASSWORD>@cluster0-juau5.mongodb.net/test\n    parseTo3dot6(atlasString, tempWriter) {\n        tempWriter.env = TEMPLATE_TYPE_ATLAS_36;\n        // save the environment selection\n        this.saveState(tempWriter, 'cloud');\n        tempWriter = this.loadState(this.loadCurrentState());\n        // regexp for 3.6 format\n        const re = /(\\S+):\\/\\/(\\S+):(\\S*)@(\\S+)\\/([^\\s?]+)\\?/;\n        const matchesArray = atlasString.match(re);\n        if (!matchesArray) {\n            return false;\n        }\n\n        tempWriter.username = matchesArray[2];\n        tempWriter.havePassword = Boolean(matchesArray[3]);\n        tempWriter.hostlist = [matchesArray[4]];\n        tempWriter.database = matchesArray[5];\n        this.saveState(tempWriter, this.loadCurrentState());\n        return true;\n    }\n\n    parseAtlasString(atlasString) {\n        const tempWriter = this.loadState('true');\n        // add shell parser here\n        if (atlasString.indexOf(' --') > -1) {\n            return this.parseShell(atlasString, tempWriter);\n        }\n        if (atlasString.startsWith('mongodb+srv')) {\n            return this.parseTo3dot6(atlasString, tempWriter);\n        }\n        return this.parseTo3dot4(atlasString, tempWriter);\n    }\n}\n\n// Create Uriwriter\nexport function setup() {\n    uriwriterSingleton = new UriwriterSingleton();\n    uriwriterSingleton.initializeWidget();\n}\n","function fullDocsPath(base) {\n    const body = document.getElementsByClassName('body')[0];\n    let path = body.getAttribute('data-pagename');\n\n    // skip if pagename is undefined (index.html)\n    if (path === 'index') {\n        path = '';\n    } else if (path) {\n        path = `${path}/`;\n    }\n\n    return `/${base}/${path}`;\n}\n\nexport function setup() {\n    $('.version-selector').on('click', (e) => {\n        e.preventDefault();\n        const base = $(e.currentTarget).data('path');\n        window.location.href = fullDocsPath(base);\n    });\n}\n","import * as componentAccordion from './componentAccordion';\nimport * as componentCloseOpen from './componentCloseOpen';\nimport * as componentCodeBlockFix from './componentCodeBlockFix';\nimport * as componentCopyButtons from './componentCopyButtons';\nimport * as componentFastLoad from './componentFastLoad';\nimport * as componentFeedback from './componentFeedback';\nimport * as componentGuides from './componentGuides';\nimport * as componentLightbox from './componentLightbox';\nimport * as componentOpenAPI from './componentOpenAPI';\nimport * as componentPillStrip from './componentPillStrip';\nimport * as componentSidebar from './componentSidebar';\nimport * as componentTabs from './componentTabs';\nimport * as componentThirdParty from './componentThirdParty';\nimport * as componentToggleController from './componentToggleController';\nimport * as componentUriWriter from './componentUriwriter';\nimport * as componentVersionSelector from './componentVersionSelector';\n\nclass FastNav {\n    constructor() {\n        this.components = [];\n    }\n\n    register(component) {\n        this.components.push(component);\n        if (component.init) { component.init(); }\n    }\n\n    update() {\n        for (const component of this.components) {\n            component.setup(this);\n        }\n    }\n}\nconst fastNav = new FastNav();\n\n$(() => {\n    // Monkey-patch jQuery to add the removed load() event handler.\n    // This is required by the JIRA issue collector 🙄\n    jQuery.fn.load = function(callback) { $(window).on('load', callback); };\n\n    componentThirdParty.initialize();\n\n    fastNav.register(componentCodeBlockFix);\n    fastNav.register(componentCopyButtons);\n    fastNav.register(componentFastLoad);\n    fastNav.register(componentFeedback);\n    fastNav.register(componentLightbox);\n    fastNav.register(componentSidebar);\n    // Must preceed componentTabs\n    fastNav.register(componentPillStrip);\n    fastNav.register(componentTabs);\n    fastNav.register(componentVersionSelector);\n    fastNav.register(componentThirdParty);\n    fastNav.register(componentGuides);\n    fastNav.register(componentOpenAPI);\n    fastNav.register(componentUriWriter);\n    fastNav.register(componentToggleController);\n    fastNav.register(componentCloseOpen);\n    fastNav.register(componentAccordion);\n\n    /* Hide toc if there aren't any items */\n    if (!$('.toc > ul > li > ul > li').length) {\n        $('.right-column .toc').hide();\n    }\n\n    /* Expand/collapse navbar on narrower viewports */\n    $('.expand-toc-icon').on('click', (e) => {\n        e.preventDefault();\n        $('.sidebar').toggleClass('reveal');\n    });\n\n    /* Reset the sidebar when the viewport is wider than tablet size */\n    const $window = $(window);\n    const $sidebar = $('.sidebar');\n    let isTabletWidth = $window.width() <= 1093;\n    $window.resize((e) => {\n        if (isTabletWidth && $window.width() > 1093) {\n            isTabletWidth = false;\n            $sidebar.removeClass('reveal');\n        } else if (!isTabletWidth && $window.width() <= 1093) {\n            isTabletWidth = true;\n        }\n    });\n\n    /* Adjust the scroll location to account for our fixed header */\n    function offsetHashLink() {\n        if (location.hash && document.getElementById(location.hash.substr(1))) {\n            $(window).scrollTop(window.scrollY - 75);\n        }\n    }\n    window.addEventListener('hashchange', offsetHashLink);\n    if (location.hash) {\n        window.setTimeout(offsetHashLink, 10);\n    }\n    $('.content').on('click', 'a', (e) => {\n        // Fixes corner case where the user clicks the same hash link twice\n        if ($(e.currentTarget).attr('href') === location.hash) {\n            window.setTimeout(offsetHashLink, 10);\n        }\n    });\n\n    // Update dynamic page features\n    fastNav.update();\n\n    if (document.querySelector) {\n        // Scroll so that the selected navbar element is in view.\n        const current = document.querySelector('a.current');\n        if (current) {\n            current.scrollIntoView(false);\n        }\n    }\n});\n"],"names":["isLeafNode","$node","siblings","length","toArray","arrayLike","const","result","i","push","requiresPageload","docsExcludedNav","window","let","href","indexOf","reportAnalytics","eventName","data","analytics","track","err","console","error","Dispatcher","this","listeners","listen","handler","dispatch","ctx","COLLAPSED_PROPERTY","accordionShowHide","element","classList","toggle","control","querySelector","innerHTML","title","innerText","status","contains","accordionElements","document","getElementsByClassName","addEventListener","bind","showNavButton","getElementById","onclick","style","display","closeNavButton","fixCodeBlock","block","Boolean","isLineNumberBlock","isCaptionBlock","buttonRow","caption","log","parentNode","insertBefore","nextSibling","moveButtonRowBelowCaption","tableBody","childNodes","tableButtonRow","createElement","linenosSpacer","buttonRowDestination","className","firstChild","appendChild","moveButtonRowToTable","codeblock","TOOLTIP_STATE_ACTIVE","TOOLTIP_STATE_INACTIVE","isCopyableCodeBlock","copyableBlocks","filter","highlightElement","copyButton","popupElement","add","closePopupTimer","tempElement","position","body","f","timeoutID","ms","text","trim","value","select","execCommand","Error","replace","clearTimeout","setTimeout","removeChild","code","fastNav","undefined","history","querySelectorAll","XMLHttpRequest","responseURL","navRootElement","bodyElement","curLoading","abortLoading","xhr","abort","loadPage","createHistory","remove","startTime","Date","url","options","onload","success","responseText","complete","onerror","open","send","xhrGet","location","pageText","trueUrl","enlapsedMs","pushState","page","textContent","newBody","newNav","parentElement","replaceChild","update","onnavigate","scroll","replaceState","nodes","handleClickFunction","ev","button","shiftKey","altKey","metaKey","ctrlKey","preventDefault","currentTarget","node","util.isLeafNode","$","util.requiresPageload","onpopstate","state","noop","assign","tar","src","k","appendNode","target","insertNode","anchor","detachNode","name","createText","createTextNode","addListener","event","removeListener","removeEventListener","destroy","detach","fire","set","get","_fragment","u","d","_state","init","component","_handlers","Object","create","_bind","root","store","callAll","fns","shift","proto","key","handlers","slice","__calling","call","observe","callback","fn","on","defer","changed","current","previous","cancel","index","splice","newState","_set","_lock","_beforecreate","_oncreate","_aftercreate","teardown","_recompute","oldState","dirty","_differs","p","_mount","_unmount","a","b","answer","change","upvoteSelected","downvoteSelected","loadJira","jiraurl","scriptElement","type","answers","submit","vote","fields","keys","question","rate","addQuestion","questions","concat","questionName","showCollectorDialog","ATL_JQ_PAGE_PROPS","triggerFunction","showFunc","fieldValues","summary","jQuery","integrity","setAttribute","pagename","createComment","attribute","iterations","project","delugeHeaderClass","delugeBodyClass","delugeClass","Deluge","path","app","MainWidget","sendRating","then","this$1","catch","askQuestion","html","askFreeformQuestion","analyticsData","useful","fieldName","Promise","resolve","reject","v","parameters","queryComponents","encodeURIComponent","JSON","stringify","join","addQueryParameters","img","Image","blacklist","meta/404","search","getAttribute","localStorage","bodyElements","prototype","hasOwnProperty","ratingPanelElement","tabsEventDispatcher","getTabPref","parse","getItem","setTabPref","pref","anonymous","tabPref","pages","pathname","tabId","setItem","tabSets","TabSet","tabType","tabStripElements","tabContents","tabStrips","tabIds","getFirstTabId","tabsElement","setup","tabBars","mainTabBar","first","insertAfter","hideTabBars","e","initRect","getBoundingClientRect","offset","scrollY","y","rects","scrollTo","x","tabSet","tabStrip","isUserAction","showHideSelectedTab","currentAttrValue","tabLink","tabList","parent","dropdownLink","dropdownListItem","hasClass","append","attr","children","childElement","register","tabElement","tabContent","firstTabidElement","tabSet$1","tabsElements","headings","recalculate","height","clientHeight","innerHeight","currentPosition","documentElement","scrollTop","bestMatch","Infinity","ref","headingElement","tocElement","headingPosition","offsetTop","delta","Math","abs","pillClickHandler","func","wait","args","timeout","later","now","apply","remaining","newArgs","throttle","showCurrentLanguageElements","leftToc","linkElement","id","setupScrollMonitor","guidesCategoryListElement","pills","setupLandingPage","CLASS_ACTIVATED","CLASS_SCALABLE","modal","modalContent","closeLightbox","wrapImage","wrapperElement","captionElement","alt","test","wrapIfNeeded","figure","naturalArea","naturalWidth","naturalHeight","clientWidth","tagName","createClickButNotSelectionHandler","dragStart","formerDragStart","clientX","clientY","toggleResource","classListAction","resourceElement","hash","expand","requested","resourceHeaderElements","pillSet","tabTypes","elements","pillStripElement","tabsType","pillStripElements","seenPills","tabStripElement","childElements","clickHandler","strip","tabTitle","pill","isCurrentNode","$current","addClass","parents","each","el","css","hide","show","$target","removeClass","slideUp","$el","has","is","slideDown","prepend","expandElement","SAMPLE_FACTORS","charts","guides","stitch","docs-ruby","ecosystem","docs-php-library","atlas","compass","manual","landing","mongoid","mms-cloud","mms-onprem","bi-connector","spark-connector","initialize","t","r","n","s","c","Array","arguments","SNIPPET_VERSION","o","async","l","getElementsByTagName","invoked","methods","factory","unshift","load","_loadOptions","branch","sampleFactor","delighted","survey","minTimeOnPage","properties","STYLE_SELECTED","STYLE","STYLE_DEPLOY","STYLE_DEPLOYTEXT","setToggleState","getTabNode","nodeName","addListenersToPills","tabPrefs","cloud","cloudState","list","TEMPLATES","getValue","option","template","templatePasswordRedactedShell","templateShell","PLACEHOLDER_PATTERN","HostList","rootElement","uriWriter","elementPairs","updateHostsFromUriWriter","prototypeAccessors","hosts","map","pair","host","lastInput","loadState","loadCurrentState","hostlist","addHost","inputElement","placeholder","statusElement","oninput","setHosts","parsed","exec","port","parseInt","isNaN","validateHost","setCustomValidity","message","uriwriterSingleton","UriwriterSingleton","uristowrite","usernamestowrite","uristowritepasswordredactedshell","uristowriteshell","urireplacestring","hostList","setupURIListeners","loadTemplateEnv","renderURI","registerDispatch","env","saveState","saveCurrentState","atlasState","addValue","uriwriter","atlaspasteduri","preparseUristrings","writeToPlaceholders","uri","prefix","charAt","urireplacestringPasswordRedactedShell","urireplacestringShell","username","setEnvironment","isAtlas","startsWith","haveWidgetOnPage","parseIncomingAtlasString","populateForm","toggleEnvironmentExternal","setupEnvironmentListeners","initiallySelected","parentChildren","childIndex","uristring","replaceString","optionStringifier","optionJoinCharacter","parts","localUriString","database","authSource","replicaSet","optionsString","renderOptions","renderOption","optionElement","label","serverPromptElement","initializeWidget","atlaspaste","pastedValue","conveyValidParse","conveyInvalidParse","renderFormValues","atlasControlsElement","parseOutShellParams","splitOnSpace","tempWriter","splitKey","splitValue","parseOutURIParams","shellString","uriParamArray","split","keyValueArray","parseOutEnvAndClusters","splitOnSpaceClusterEnv","shellMatch","shellArray","match","hostListString","parseShell","atlasString","parseAtlasString","parseTo3dot4","matchesArray","arrayOfMatches","settingsArray","keyValue","splitOptions","parseTo3dot6","havePassword","base","fullDocsPath","FastNav","components","componentThirdParty.initialize","componentCodeBlockFix","componentCopyButtons","componentFastLoad","componentFeedback","componentLightbox","componentSidebar","componentPillStrip","componentTabs","componentVersionSelector","componentThirdParty","componentGuides","componentOpenAPI","componentUriWriter","componentToggleController","componentCloseOpen","componentAccordion","toggleClass","$window","$sidebar","isTabletWidth","width","offsetHashLink","substr","resize","scrollIntoView"],"mappings":"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"}